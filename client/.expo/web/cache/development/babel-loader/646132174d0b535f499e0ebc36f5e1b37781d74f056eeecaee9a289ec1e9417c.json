{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect, useContext, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { AuthContext } from \"../context/AuthContext\";\nimport axios from 'axios';\nimport { API_URL } from \"../config\";\nimport { getConversationsList, sendDirectMessage, getMessages } from \"../services/api\";\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ChatListScreen = function ChatListScreen(_ref) {\n  var _route$params2, _route$params6, _route$params7, _route$params8;\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useContext = useContext(AuthContext),\n    userInfo = _useContext.userInfo,\n    requireLogin = _useContext.requireLogin;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    conversations = _useState2[0],\n    setConversations = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    refreshing = _useState6[0],\n    setRefreshing = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    showTrialModal = _useState8[0],\n    setShowTrialModal = _useState8[1];\n  var _useState9 = useState((userInfo == null ? void 0 : userInfo.phone) || ''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    phone = _useState10[0],\n    setPhone = _useState10[1];\n  var _useState11 = useState(''),\n    _useState12 = _slicedToArray(_useState11, 2),\n    phoneError = _useState12[0],\n    setPhoneError = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    isStartingTrial = _useState14[0],\n    setIsStartingTrial = _useState14[1];\n  var _useState15 = useState(''),\n    _useState16 = _slicedToArray(_useState15, 2),\n    trialError = _useState16[0],\n    setTrialError = _useState16[1];\n  var requestedTrialRef = useRef(false);\n  var _useState17 = useState(false),\n    _useState18 = _slicedToArray(_useState17, 2),\n    showComposeModal = _useState18[0],\n    setShowComposeModal = _useState18[1];\n  var _useState19 = useState(''),\n    _useState20 = _slicedToArray(_useState19, 2),\n    newMessage = _useState20[0],\n    setNewMessage = _useState20[1];\n  var _useState21 = useState(null),\n    _useState22 = _slicedToArray(_useState21, 2),\n    selectedUser = _useState22[0],\n    setSelectedUser = _useState22[1];\n  var _useState23 = useState(null),\n    _useState24 = _slicedToArray(_useState23, 2),\n    selectedPost = _useState24[0],\n    setSelectedPost = _useState24[1];\n  useEffect(function () {\n    var unsubscribe = navigation.addListener('focus', function () {\n      if (userInfo) {\n        fetchConversations();\n      }\n    });\n    return unsubscribe;\n  }, [navigation, route]);\n  useEffect(function () {\n    var _route$params;\n    if ((_route$params = route.params) != null && _route$params.messageUpdated && userInfo) {\n      console.log('Message update detected, refreshing conversations');\n      fetchConversations();\n      navigation.setParams({\n        messageUpdated: undefined\n      });\n    }\n  }, [(_route$params2 = route.params) == null ? void 0 : _route$params2.messageUpdated]);\n  useEffect(function () {\n    var _route$params3, _route$params4, _route$params5;\n    if ((_route$params3 = route.params) != null && _route$params3.selectedUser && (_route$params4 = route.params) != null && _route$params4.selectedPost && (_route$params5 = route.params) != null && _route$params5.showComposeMessage) {\n      setSelectedUser(route.params.selectedUser);\n      setSelectedPost(route.params.selectedPost);\n      setShowComposeModal(true);\n    }\n  }, [(_route$params6 = route.params) == null ? void 0 : _route$params6.selectedUser, (_route$params7 = route.params) == null ? void 0 : _route$params7.selectedPost, (_route$params8 = route.params) == null ? void 0 : _route$params8.showComposeMessage]);\n  useEffect(function () {\n    if (userInfo) {\n      fetchConversations();\n    }\n  }, [userInfo]);\n  var checkAccess = function checkAccess() {\n    return !!userInfo;\n  };\n  var fetchConversations = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        setLoading(true);\n        try {\n          console.log('Attempting to fetch conversations from API...');\n          var apiConversations = yield getConversationsList();\n          console.log('API Response:', JSON.stringify(apiConversations));\n          if (apiConversations && apiConversations.length > 0) {\n            console.log('Successfully fetched conversations from API, count:', apiConversations.length);\n            var formattedConversations = apiConversations.filter(function (message) {\n              var isValid = message && message.sender && message.receiver && message.post;\n              if (!isValid) {\n                console.log('Invalid message object:', message);\n              }\n              return isValid;\n            }).map(function (message) {\n              if (!message.sender._id || !message.receiver._id || !message.post._id) {\n                console.log('Message has incomplete data:', message);\n                message.sender._id = message.sender._id || `sender_${Date.now()}`;\n                message.receiver._id = message.receiver._id || `receiver_${Date.now()}`;\n                message.post._id = message.post._id || `post_${Date.now()}`;\n              }\n              console.log('Current user ID:', userInfo._id);\n              console.log('Message sender ID:', message.sender._id);\n              console.log('Message receiver ID:', message.receiver._id);\n              var isSender = message.sender._id.toString() === userInfo._id.toString();\n              console.log('Is current user the sender?', isSender);\n              var otherParty = isSender ? message.receiver : message.sender;\n              console.log('Other party:', otherParty);\n              return {\n                _id: `${otherParty._id}_${message.post._id}`,\n                user: otherParty,\n                post: message.post,\n                lastMessage: message,\n                messages: [message],\n                unreadCount: message.receiver._id.toString() === userInfo._id.toString() && !message.isRead ? 1 : 0\n              };\n            });\n            console.log('Formatted conversations count:', formattedConversations.length);\n            formattedConversations.sort(function (a, b) {\n              var _b$lastMessage, _a$lastMessage;\n              return new Date((_b$lastMessage = b.lastMessage) == null ? void 0 : _b$lastMessage.createdAt) - new Date((_a$lastMessage = a.lastMessage) == null ? void 0 : _a$lastMessage.createdAt);\n            });\n            setConversations(formattedConversations);\n            setLoading(false);\n            setRefreshing(false);\n            return;\n          } else {\n            console.log('API returned empty or invalid conversations array:', apiConversations);\n          }\n        } catch (apiError) {\n          console.log('Error fetching from API, falling back to local storage:', apiError);\n        }\n        try {\n          var savedConversations = yield AsyncStorage.getItem('demo_conversations');\n          if (savedConversations) {\n            try {\n              var parsedConversations = JSON.parse(savedConversations);\n              if (parsedConversations && Array.isArray(parsedConversations) && parsedConversations.length > 0) {\n                var validConversations = parsedConversations.filter(function (conv) {\n                  return conv && conv.user && conv.user._id && conv.post && conv.post._id;\n                });\n                setConversations(validConversations);\n                setLoading(false);\n                setRefreshing(false);\n                return;\n              }\n            } catch (parseError) {\n              console.log('Error parsing saved conversations:', parseError);\n            }\n          }\n        } catch (storageError) {\n          console.log('Error accessing local storage:', storageError);\n        }\n        var demoConversations = [{\n          _id: 'demo1',\n          user: {\n            _id: 'user1',\n            name: 'John Doe',\n            profileImage: 'https://randomuser.me/api/portraits/men/32.jpg'\n          },\n          lastMessage: {\n            content: 'This is a demo conversation.',\n            createdAt: new Date(),\n            sender: {\n              _id: 'user1',\n              name: 'John Doe'\n            },\n            recipient: {\n              _id: userInfo._id,\n              name: userInfo.name\n            }\n          },\n          post: {\n            _id: 'post1',\n            title: 'Basketball game this weekend'\n          },\n          unreadCount: 1,\n          messages: [{\n            _id: `msg_${Date.now()}`,\n            content: 'This is a demo conversation.',\n            createdAt: new Date(),\n            sender: {\n              _id: 'user1',\n              name: 'John Doe'\n            },\n            recipient: {\n              _id: userInfo._id,\n              name: userInfo.name\n            },\n            post: {\n              _id: 'post1',\n              title: 'Basketball game this weekend'\n            }\n          }]\n        }];\n        setConversations(demoConversations);\n        yield AsyncStorage.setItem('demo_conversations', JSON.stringify(demoConversations));\n      } catch (error) {\n        console.log('Error fetching conversations:', error);\n        Alert.alert('Error', 'Failed to load conversations. Please try again later.');\n      } finally {\n        setLoading(false);\n        setRefreshing(false);\n      }\n    });\n    return function fetchConversations() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleRefresh = function handleRefresh() {\n    setRefreshing(true);\n    fetchConversations();\n  };\n  var goToChat = function () {\n    var _ref3 = _asyncToGenerator(function* (conversation) {\n      if (!conversation || !conversation.user || !conversation.post) {\n        console.log('Invalid conversation object:', conversation);\n        Alert.alert('Error', 'Cannot open this conversation. Data is incomplete.');\n        return;\n      }\n      if (!conversation.user._id || !conversation.post._id) {\n        console.log('Conversation has missing _id properties:', conversation);\n        Alert.alert('Error', 'Cannot open this conversation. ID information is missing.');\n        return;\n      }\n      setSelectedUser(conversation.user);\n      setSelectedPost(conversation.post);\n      setNewMessage('');\n      try {\n        try {\n          console.log('Fetching messages for conversation with:', conversation.user._id);\n          var response = yield getMessages(conversation.user._id);\n          if (response.success && response.data && response.data.length > 0) {\n            var existingConvIndex = conversations.findIndex(function (c) {\n              return c._id === conversation._id;\n            });\n            if (existingConvIndex !== -1) {\n              var updatedConversations = _toConsumableArray(conversations);\n              updatedConversations[existingConvIndex].messages = response.data;\n              setConversations(updatedConversations);\n            }\n          }\n        } catch (apiError) {\n          console.log('Error fetching messages from API:', apiError);\n        }\n        setShowComposeModal(true);\n      } catch (error) {\n        console.log('Error in goToChat:', error);\n        setShowComposeModal(true);\n      }\n    });\n    return function goToChat(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleSendNewMessage = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      if (!newMessage.trim() || !selectedUser || !selectedPost) {\n        return;\n      }\n      var messageText = newMessage.trim();\n      setNewMessage('');\n      var tempMessage = {\n        _id: `local_msg_${Date.now()}`,\n        content: messageText,\n        createdAt: new Date().toISOString(),\n        sender: {\n          _id: userInfo._id,\n          name: userInfo.name,\n          email: userInfo.email\n        },\n        receiver: selectedUser,\n        post: selectedPost,\n        sending: true\n      };\n      try {\n        var conversationId = `${selectedUser._id}_${selectedPost._id}`;\n        var existingConvIndex = conversations.findIndex(function (c) {\n          return c.user._id === selectedUser._id && c.post._id === selectedPost._id;\n        });\n        var updatedConversations = _toConsumableArray(conversations);\n        if (existingConvIndex !== -1) {\n          updatedConversations[existingConvIndex] = _objectSpread(_objectSpread({}, updatedConversations[existingConvIndex]), {}, {\n            lastMessage: tempMessage,\n            messages: [tempMessage].concat(_toConsumableArray(updatedConversations[existingConvIndex].messages || []))\n          });\n        } else {\n          var newConversation = {\n            _id: conversationId,\n            user: selectedUser,\n            lastMessage: tempMessage,\n            messages: [tempMessage],\n            post: selectedPost,\n            unreadCount: 0\n          };\n          updatedConversations = [newConversation].concat(_toConsumableArray(updatedConversations));\n        }\n        setConversations(updatedConversations);\n        var messageData = {\n          recipient: selectedUser._id,\n          content: messageText,\n          post: selectedPost._id\n        };\n        console.log('Sending message via API:', messageData);\n        var response;\n        try {\n          response = yield sendDirectMessage(messageData);\n          console.log('API response:', response);\n          var updatedConvs = _toConsumableArray(updatedConversations);\n          var convIndex = updatedConvs.findIndex(function (c) {\n            return c.user._id === selectedUser._id && c.post._id === selectedPost._id;\n          });\n          if (convIndex !== -1) {\n            updatedConvs[convIndex].lastMessage = _objectSpread(_objectSpread({}, response), {}, {\n              sender: {\n                _id: userInfo._id,\n                name: userInfo.name,\n                email: userInfo.email\n              },\n              receiver: selectedUser,\n              post: selectedPost\n            });\n            var msgIndex = updatedConvs[convIndex].messages.findIndex(function (msg) {\n              return msg._id === tempMessage._id;\n            });\n            if (msgIndex !== -1) {\n              updatedConvs[convIndex].messages[msgIndex] = _objectSpread(_objectSpread({}, response), {}, {\n                sender: {\n                  _id: userInfo._id,\n                  name: userInfo.name,\n                  email: userInfo.email\n                },\n                receiver: selectedUser,\n                post: selectedPost\n              });\n            }\n            setConversations(updatedConvs);\n          }\n          setShowComposeModal(false);\n          setTimeout(function () {\n            navigation.navigate('Chat', {\n              recipient: selectedUser,\n              post: selectedPost,\n              messageUpdated: Date.now()\n            });\n          }, 200);\n        } catch (apiError) {\n          console.log('Error sending via API, using local fallback:', apiError);\n          var _updatedConvs = _toConsumableArray(updatedConversations);\n          var _convIndex = _updatedConvs.findIndex(function (c) {\n            return c.user._id === selectedUser._id && c.post._id === selectedPost._id;\n          });\n          if (_convIndex !== -1) {\n            var _msgIndex = _updatedConvs[_convIndex].messages.findIndex(function (msg) {\n              return msg._id === tempMessage._id;\n            });\n            if (_msgIndex !== -1) {\n              _updatedConvs[_convIndex].messages[_msgIndex] = _objectSpread(_objectSpread({}, _updatedConvs[_convIndex].messages[_msgIndex]), {}, {\n                sending: false,\n                failed: true\n              });\n            }\n            setConversations(_updatedConvs);\n          }\n          Alert.alert('Error', 'Failed to send message. Network issue or server unavailable.');\n        }\n      } catch (error) {\n        console.log('Error saving message:', error);\n        Alert.alert('Error', 'Failed to send message. Please try again.');\n      }\n    });\n    return function handleSendNewMessage() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var resetMessages = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      try {\n        yield AsyncStorage.removeItem('demo_conversations');\n        Alert.alert('Messages Reset', 'Local message cache has been cleared. Messages from the server may still exist. Pull down to refresh and see the changes.', [{\n          text: 'OK',\n          onPress: function onPress() {\n            return fetchConversations();\n          }\n        }]);\n      } catch (error) {\n        console.log('Error resetting messages:', error);\n        Alert.alert('Error', 'Failed to reset messages.');\n      }\n    });\n    return function resetMessages() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  if (!userInfo) {\n    return _jsxs(View, {\n      style: styles.centeredContainer,\n      children: [_jsx(Ionicons, {\n        name: \"chatbubbles-outline\",\n        size: 70,\n        color: \"#0066CC\"\n      }), _jsx(Text, {\n        style: styles.noticeTitle,\n        children: \"Login Required\"\n      }), _jsx(Text, {\n        style: styles.noticeText,\n        children: \"Please log in to access your conversations\"\n      }), _jsx(TouchableOpacity, {\n        style: styles.loginButton,\n        onPress: function onPress() {\n          return navigation.navigate('Login');\n        },\n        children: _jsx(Text, {\n          style: styles.loginButtonText,\n          children: \"Login\"\n        })\n      })]\n    });\n  }\n  var renderEmptyState = function renderEmptyState() {\n    return _jsxs(View, {\n      style: styles.emptyContainer,\n      children: [_jsx(Ionicons, {\n        name: \"chatbubbles-outline\",\n        size: 70,\n        color: \"#ccc\"\n      }), _jsx(Text, {\n        style: styles.emptyTitle,\n        children: \"No Conversations Yet\"\n      }), _jsx(Text, {\n        style: styles.emptyText,\n        children: \"You don't have any messages yet. Find a post you're interested in and start a conversation!\"\n      }), _jsx(TouchableOpacity, {\n        style: styles.findPostsButton,\n        onPress: function onPress() {\n          return navigation.navigate('Home');\n        },\n        children: _jsx(Text, {\n          style: styles.findPostsButtonText,\n          children: \"Find Posts\"\n        })\n      })]\n    });\n  };\n  var renderConversationItem = function renderConversationItem(_ref6) {\n    var _item$lastMessage, _item$lastMessage$sen, _item$lastMessage2, _item$lastMessage3, _item$lastMessage4, _item$lastMessage5, _item$user, _item$user2, _item$post;\n    var item = _ref6.item;\n    if (!item || !item.user || !item.lastMessage || !item.post) {\n      console.log('Skipping invalid conversation item:', item);\n      return null;\n    }\n    var isUnread = item.unreadCount > 0;\n    var isSenderMe = ((_item$lastMessage = item.lastMessage) == null ? void 0 : (_item$lastMessage$sen = _item$lastMessage.sender) == null ? void 0 : _item$lastMessage$sen._id) === (userInfo == null ? void 0 : userInfo._id);\n    var messageContent = ((_item$lastMessage2 = item.lastMessage) == null ? void 0 : _item$lastMessage2.content) || 'No message content';\n    var messagePreview = isSenderMe ? \"You: \" + messageContent : messageContent;\n    var isSending = (_item$lastMessage3 = item.lastMessage) == null ? void 0 : _item$lastMessage3.sending;\n    var isFailed = (_item$lastMessage4 = item.lastMessage) == null ? void 0 : _item$lastMessage4.failed;\n    var messageDate = (_item$lastMessage5 = item.lastMessage) != null && _item$lastMessage5.createdAt ? new Date(item.lastMessage.createdAt) : new Date();\n    return _jsxs(TouchableOpacity, {\n      style: [styles.conversationItem, isUnread && styles.unreadItem],\n      onPress: function onPress() {\n        return goToChat(item);\n      },\n      children: [_jsxs(View, {\n        style: styles.avatarContainer,\n        children: [(_item$user = item.user) != null && _item$user.profileImage ? _jsx(Image, {\n          source: {\n            uri: item.user.profileImage\n          },\n          style: styles.avatar\n        }) : _jsx(View, {\n          style: styles.avatarPlaceholder,\n          children: _jsx(Ionicons, {\n            name: \"person\",\n            size: 20,\n            color: \"#999\"\n          })\n        }), isUnread && _jsx(View, {\n          style: styles.unreadDot\n        })]\n      }), _jsxs(View, {\n        style: styles.conversationInfo,\n        children: [_jsxs(View, {\n          style: styles.conversationHeader,\n          children: [_jsx(Text, {\n            style: styles.username,\n            children: ((_item$user2 = item.user) == null ? void 0 : _item$user2.name) || 'Unknown User'\n          }), _jsx(Text, {\n            style: styles.messageTime,\n            children: messageDate.toLocaleTimeString([], {\n              hour: '2-digit',\n              minute: '2-digit'\n            })\n          })]\n        }), _jsxs(View, {\n          style: styles.messagePreviewContainer,\n          children: [_jsxs(Text, {\n            style: [styles.messagePreview, isUnread && styles.unreadText, isFailed && styles.failedText],\n            numberOfLines: 1,\n            children: [isSending && '🕒 ', isFailed && '❌ ', messagePreview]\n          }), isUnread && item.unreadCount > 0 && _jsx(View, {\n            style: styles.unreadBadge,\n            children: _jsx(Text, {\n              style: styles.unreadCount,\n              children: item.unreadCount > 99 ? '99+' : item.unreadCount\n            })\n          })]\n        }), _jsxs(Text, {\n          style: styles.postTitle,\n          numberOfLines: 1,\n          children: [\"Re: \", ((_item$post = item.post) == null ? void 0 : _item$post.title) || 'Unknown Post']\n        })]\n      })]\n    });\n  };\n  var renderComposeModal = function renderComposeModal() {\n    var selectedConversation = conversations.find(function (c) {\n      return c.user._id === (selectedUser == null ? void 0 : selectedUser._id) && c.post._id === (selectedPost == null ? void 0 : selectedPost._id);\n    });\n    var conversationMessages = (selectedConversation == null ? void 0 : selectedConversation.messages) || [];\n    return _jsx(Modal, {\n      visible: showComposeModal,\n      transparent: true,\n      animationType: \"slide\",\n      onRequestClose: function onRequestClose() {\n        return setShowComposeModal(false);\n      },\n      children: _jsx(View, {\n        style: styles.fullScreenModalOverlay,\n        children: _jsxs(View, {\n          style: styles.chatModalContent,\n          children: [_jsxs(View, {\n            style: styles.composeModalHeader,\n            children: [_jsxs(View, {\n              style: styles.chatHeaderInfo,\n              children: [selectedUser != null && selectedUser.profileImage ? _jsx(Image, {\n                source: {\n                  uri: selectedUser.profileImage\n                },\n                style: styles.chatHeaderAvatar\n              }) : _jsx(View, {\n                style: styles.chatHeaderAvatarPlaceholder,\n                children: _jsx(Ionicons, {\n                  name: \"person\",\n                  size: 18,\n                  color: \"#ccc\"\n                })\n              }), _jsxs(View, {\n                style: styles.chatHeaderTextContainer,\n                children: [_jsx(Text, {\n                  style: styles.composeModalTitle,\n                  children: (selectedUser == null ? void 0 : selectedUser.name) || 'Chat'\n                }), selectedPost && _jsxs(Text, {\n                  style: styles.chatHeaderPostTitle,\n                  numberOfLines: 1,\n                  children: [\"Re: \", selectedPost.title]\n                })]\n              })]\n            }), _jsx(TouchableOpacity, {\n              onPress: function onPress() {\n                return setShowComposeModal(false);\n              },\n              children: _jsx(Ionicons, {\n                name: \"close\",\n                size: 24,\n                color: \"#333\"\n              })\n            })]\n          }), _jsx(View, {\n            style: styles.chatMessagesContainer,\n            children: conversationMessages.length > 0 ? _jsx(FlatList, {\n              data: conversationMessages,\n              keyExtractor: function keyExtractor(item) {\n                return item._id || `msg_${Date.now()}_${Math.random()}`;\n              },\n              renderItem: function renderItem(_ref7) {\n                var _item$sender;\n                var item = _ref7.item;\n                if (!item || !item.content) {\n                  return null;\n                }\n                var isFromMe = ((_item$sender = item.sender) == null ? void 0 : _item$sender._id) === (userInfo == null ? void 0 : userInfo._id);\n                var messageTime = item.createdAt ? new Date(item.createdAt) : new Date();\n                return _jsxs(View, {\n                  style: [styles.messageBubble, isFromMe ? styles.myMessage : styles.theirMessage],\n                  children: [_jsx(Text, {\n                    style: [styles.messageText, isFromMe ? styles.myMessageText : styles.theirMessageText],\n                    children: item.content\n                  }), _jsx(Text, {\n                    style: [styles.messageTime, isFromMe ? styles.myMessageTime : styles.theirMessageTime],\n                    children: messageTime.toLocaleTimeString([], {\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })\n                  })]\n                });\n              },\n              inverted: true,\n              contentContainerStyle: styles.messagesListContent\n            }) : _jsxs(View, {\n              style: styles.noMessagesContainer,\n              children: [_jsx(Ionicons, {\n                name: \"chatbubble-outline\",\n                size: 40,\n                color: \"#ccc\"\n              }), _jsx(Text, {\n                style: styles.noMessagesText,\n                children: \"No messages yet\"\n              }), _jsx(Text, {\n                style: styles.noMessagesSubtext,\n                children: \"Start the conversation below\"\n              })]\n            })\n          }), _jsxs(View, {\n            style: styles.chatInputContainer,\n            children: [_jsx(TextInput, {\n              style: styles.chatInput,\n              placeholder: \"Type your message here...\",\n              value: newMessage,\n              onChangeText: setNewMessage,\n              multiline: true,\n              maxHeight: 100\n            }), _jsx(TouchableOpacity, {\n              style: [styles.sendButton, !newMessage.trim() && styles.sendButtonDisabled],\n              onPress: handleSendNewMessage,\n              disabled: !newMessage.trim(),\n              children: _jsx(Ionicons, {\n                name: \"send\",\n                size: 20,\n                color: newMessage.trim() ? \"white\" : \"#999\"\n              })\n            })]\n          })]\n        })\n      })\n    });\n  };\n  if (loading && !refreshing) {\n    return _jsxs(View, {\n      style: styles.loadingContainer,\n      children: [_jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#0066CC\"\n      }), _jsx(Text, {\n        style: styles.loadingText,\n        children: \"Loading conversations...\"\n      })]\n    });\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [renderComposeModal(), _jsx(FlatList, {\n      data: conversations,\n      keyExtractor: function keyExtractor(item) {\n        return item._id;\n      },\n      renderItem: renderConversationItem,\n      onRefresh: handleRefresh,\n      refreshing: refreshing,\n      ListEmptyComponent: renderEmptyState,\n      contentContainerStyle: conversations.length === 0 ? {\n        flex: 1\n      } : null\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f8f8'\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0'\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333'\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  loadingText: {\n    marginTop: 12,\n    fontSize: 16,\n    color: '#666'\n  },\n  conversationItem: {\n    flexDirection: 'row',\n    padding: 15,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  unreadItem: {\n    backgroundColor: '#f0f7ff'\n  },\n  avatarContainer: {\n    marginRight: 12\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25\n  },\n  avatarPlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  conversationInfo: {\n    flex: 1\n  },\n  conversationHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 4\n  },\n  username: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333'\n  },\n  messageTime: {\n    fontSize: 12,\n    color: '#888'\n  },\n  messagePreviewContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n    flex: 1\n  },\n  messagePreview: {\n    fontSize: 14,\n    color: '#666',\n    flex: 1,\n    marginRight: 8\n  },\n  unreadText: {\n    fontWeight: 'bold',\n    color: '#000'\n  },\n  failedText: {\n    color: 'red'\n  },\n  unreadBadge: {\n    backgroundColor: '#0066CC',\n    width: 20,\n    height: 20,\n    borderRadius: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 8,\n    alignSelf: 'center'\n  },\n  unreadCount: {\n    color: 'white',\n    fontSize: 12,\n    fontWeight: 'bold'\n  },\n  postTitle: {\n    fontSize: 14,\n    color: '#0066CC',\n    marginBottom: 4\n  },\n  centeredContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  noticeTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginTop: 16,\n    marginBottom: 8,\n    color: '#333'\n  },\n  noticeText: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 24,\n    color: '#666',\n    lineHeight: 22\n  },\n  loginButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    marginTop: 8\n  },\n  loginButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  trialButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    marginBottom: 12,\n    width: '80%',\n    alignItems: 'center'\n  },\n  trialButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  upgradeButton: {\n    borderWidth: 1,\n    borderColor: '#0066CC',\n    backgroundColor: 'transparent',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    width: '80%',\n    alignItems: 'center'\n  },\n  upgradeButtonText: {\n    color: '#0066CC',\n    fontSize: 16,\n    fontWeight: '600'\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  emptyTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginTop: 16,\n    marginBottom: 8,\n    color: '#333'\n  },\n  emptyText: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 24,\n    color: '#666',\n    lineHeight: 22\n  },\n  findPostsButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8\n  },\n  findPostsButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  newChatButton: {\n    position: 'absolute',\n    right: 20,\n    bottom: 20,\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n    elevation: 3\n  },\n  newChatButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    marginLeft: 4\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    padding: 20\n  },\n  trialModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    width: '85%',\n    maxWidth: 400,\n    overflow: 'hidden',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 4\n  },\n  trialModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  trialModalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333'\n  },\n  trialModalBody: {\n    padding: 20,\n    alignItems: 'center'\n  },\n  trialIcon: {\n    marginBottom: 15\n  },\n  trialTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 10\n  },\n  trialDescription: {\n    fontSize: 16,\n    color: '#333',\n    textAlign: 'center',\n    marginBottom: 20,\n    lineHeight: 24\n  },\n  benefitsContainer: {\n    marginBottom: 20\n  },\n  benefitRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4\n  },\n  benefitText: {\n    fontSize: 16,\n    color: '#333',\n    marginLeft: 8\n  },\n  phoneInputContainer: {\n    width: '100%',\n    marginBottom: 20\n  },\n  phoneLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 8,\n    color: '#333'\n  },\n  phoneInputWrapper: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 8,\n    padding: 12\n  },\n  phoneIcon: {\n    marginRight: 8\n  },\n  phoneInput: {\n    flex: 1,\n    fontSize: 16\n  },\n  errorText: {\n    color: 'red',\n    fontSize: 12,\n    marginTop: 5\n  },\n  startTrialButton: {\n    backgroundColor: '#0066CC',\n    padding: 12,\n    borderRadius: 8,\n    flex: 1.5,\n    alignItems: 'center'\n  },\n  startTrialButtonText: {\n    color: 'white',\n    fontWeight: 'bold'\n  },\n  termsText: {\n    fontSize: 12,\n    color: '#666',\n    textAlign: 'center',\n    marginTop: 10\n  },\n  statusBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f0f0f0',\n    paddingVertical: 4,\n    paddingHorizontal: 8,\n    borderRadius: 12\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n    marginLeft: 4\n  },\n  composeModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    width: '100%',\n    maxWidth: 400,\n    overflow: 'hidden',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 4\n  },\n  composeModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n    backgroundColor: 'white'\n  },\n  chatHeaderInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1\n  },\n  chatHeaderAvatar: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    marginRight: 8\n  },\n  chatHeaderAvatarPlaceholder: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 8\n  },\n  chatHeaderTextContainer: {\n    flexDirection: 'column',\n    flex: 1\n  },\n  composeModalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333'\n  },\n  chatHeaderPostTitle: {\n    fontSize: 14,\n    color: '#666'\n  },\n  chatMessagesContainer: {\n    flex: 1,\n    backgroundColor: '#f8f8f8'\n  },\n  messagesListContent: {\n    padding: 16,\n    flexGrow: 1,\n    justifyContent: 'flex-end'\n  },\n  messageBubble: {\n    maxWidth: '80%',\n    padding: 12,\n    borderRadius: 18,\n    marginBottom: 8\n  },\n  myMessage: {\n    backgroundColor: '#0066CC',\n    alignSelf: 'flex-end',\n    borderBottomRightRadius: 4\n  },\n  theirMessage: {\n    backgroundColor: 'white',\n    alignSelf: 'flex-start',\n    borderBottomLeftRadius: 4\n  },\n  messageText: {\n    fontSize: 16\n  },\n  myMessageText: {\n    color: 'white'\n  },\n  theirMessageText: {\n    color: '#333'\n  },\n  messageTime: {\n    fontSize: 12,\n    marginTop: 4,\n    alignSelf: 'flex-end'\n  },\n  myMessageTime: {\n    color: 'rgba(255, 255, 255, 0.7)'\n  },\n  theirMessageTime: {\n    color: 'rgba(0, 0, 0, 0.5)'\n  },\n  chatInputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: 'white',\n    borderTopWidth: 1,\n    borderTopColor: '#eee'\n  },\n  chatInput: {\n    flex: 1,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 20,\n    marginRight: 10,\n    maxHeight: 100\n  },\n  sendButton: {\n    backgroundColor: '#0066CC',\n    borderRadius: 25,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  sendButtonDisabled: {\n    backgroundColor: '#cccccc'\n  },\n  noMessagesContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  noMessagesText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#666',\n    marginTop: 10\n  },\n  noMessagesSubtext: {\n    fontSize: 14,\n    color: '#999',\n    textAlign: 'center',\n    marginTop: 5\n  },\n  resetButton: {\n    position: 'absolute',\n    left: 20,\n    bottom: 20,\n    backgroundColor: '#FF3B30',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n    elevation: 3\n  },\n  resetButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    marginLeft: 4\n  },\n  fullScreenModalOverlay: {\n    flex: 1,\n    backgroundColor: 'white'\n  },\n  chatModalContent: {\n    flex: 1,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  unreadDot: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 12,\n    height: 12,\n    backgroundColor: '#0066CC',\n    borderRadius: 6,\n    borderWidth: 2,\n    borderColor: 'white'\n  }\n});\nexport default ChatListScreen;","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","View","Text","StyleSheet","FlatList","TouchableOpacity","ActivityIndicator","Alert","Image","Modal","TextInput","Ionicons","AuthContext","axios","API_URL","getConversationsList","sendDirectMessage","getMessages","KeyboardAwareScrollView","AsyncStorage","jsx","_jsx","jsxs","_jsxs","ChatListScreen","_ref","_route$params2","_route$params6","_route$params7","_route$params8","navigation","route","_useContext","userInfo","requireLogin","_useState","_useState2","_slicedToArray","conversations","setConversations","_useState3","_useState4","loading","setLoading","_useState5","_useState6","refreshing","setRefreshing","_useState7","_useState8","showTrialModal","setShowTrialModal","_useState9","phone","_useState10","setPhone","_useState11","_useState12","phoneError","setPhoneError","_useState13","_useState14","isStartingTrial","setIsStartingTrial","_useState15","_useState16","trialError","setTrialError","requestedTrialRef","_useState17","_useState18","showComposeModal","setShowComposeModal","_useState19","_useState20","newMessage","setNewMessage","_useState21","_useState22","selectedUser","setSelectedUser","_useState23","_useState24","selectedPost","setSelectedPost","unsubscribe","addListener","fetchConversations","_route$params","params","messageUpdated","console","log","setParams","undefined","_route$params3","_route$params4","_route$params5","showComposeMessage","checkAccess","_ref2","_asyncToGenerator","apiConversations","JSON","stringify","length","formattedConversations","filter","message","isValid","sender","receiver","post","map","_id","Date","now","isSender","toString","otherParty","user","lastMessage","messages","unreadCount","isRead","sort","a","b","_b$lastMessage","_a$lastMessage","createdAt","apiError","savedConversations","getItem","parsedConversations","parse","Array","isArray","validConversations","conv","parseError","storageError","demoConversations","name","profileImage","content","recipient","title","setItem","error","alert","apply","arguments","handleRefresh","goToChat","_ref3","conversation","response","success","data","existingConvIndex","findIndex","c","updatedConversations","_toConsumableArray","_x","handleSendNewMessage","_ref4","trim","messageText","tempMessage","toISOString","email","sending","conversationId","_objectSpread","concat","newConversation","messageData","updatedConvs","convIndex","msgIndex","msg","setTimeout","navigate","failed","resetMessages","_ref5","removeItem","text","onPress","style","styles","centeredContainer","children","size","color","noticeTitle","noticeText","loginButton","loginButtonText","renderEmptyState","emptyContainer","emptyTitle","emptyText","findPostsButton","findPostsButtonText","renderConversationItem","_ref6","_item$lastMessage","_item$lastMessage$sen","_item$lastMessage2","_item$lastMessage3","_item$lastMessage4","_item$lastMessage5","_item$user","_item$user2","_item$post","item","isUnread","isSenderMe","messageContent","messagePreview","isSending","isFailed","messageDate","conversationItem","unreadItem","avatarContainer","source","uri","avatar","avatarPlaceholder","unreadDot","conversationInfo","conversationHeader","username","messageTime","toLocaleTimeString","hour","minute","messagePreviewContainer","unreadText","failedText","numberOfLines","unreadBadge","postTitle","renderComposeModal","selectedConversation","find","conversationMessages","visible","transparent","animationType","onRequestClose","fullScreenModalOverlay","chatModalContent","composeModalHeader","chatHeaderInfo","chatHeaderAvatar","chatHeaderAvatarPlaceholder","chatHeaderTextContainer","composeModalTitle","chatHeaderPostTitle","chatMessagesContainer","keyExtractor","Math","random","renderItem","_ref7","_item$sender","isFromMe","messageBubble","myMessage","theirMessage","myMessageText","theirMessageText","myMessageTime","theirMessageTime","inverted","contentContainerStyle","messagesListContent","noMessagesContainer","noMessagesText","noMessagesSubtext","chatInputContainer","chatInput","placeholder","value","onChangeText","multiline","maxHeight","sendButton","sendButtonDisabled","disabled","loadingContainer","loadingText","container","onRefresh","ListEmptyComponent","flex","create","backgroundColor","header","flexDirection","justifyContent","alignItems","paddingHorizontal","paddingVertical","borderBottomWidth","borderBottomColor","headerTitle","fontSize","fontWeight","marginTop","padding","marginRight","width","height","borderRadius","marginBottom","marginLeft","alignSelf","textAlign","lineHeight","trialButton","trialButtonText","upgradeButton","borderWidth","borderColor","upgradeButtonText","newChatButton","position","right","bottom","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","newChatButtonText","modalOverlay","trialModalContent","maxWidth","overflow","trialModalHeader","trialModalTitle","trialModalBody","trialIcon","trialTitle","trialDescription","benefitsContainer","benefitRow","benefitText","phoneInputContainer","phoneLabel","phoneInputWrapper","phoneIcon","phoneInput","errorText","startTrialButton","startTrialButtonText","termsText","statusBadge","statusText","composeModalContent","flexGrow","borderBottomRightRadius","borderBottomLeftRadius","borderTopWidth","borderTopColor","resetButton","left","resetButtonText","display"],"sources":["/Users/handy.hasan/Documents/SportsConnect/client/screens/ChatListScreen.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TouchableOpacity,\n  ActivityIndicator,\n  Alert,\n  Image,\n  Modal,\n  TextInput\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { AuthContext } from '../context/AuthContext';\nimport axios from 'axios';\nimport { API_URL } from '../config';\nimport { getConversationsList, sendDirectMessage, getMessages } from '../services/api';\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst ChatListScreen = ({ navigation, route }) => {\n  const { userInfo, requireLogin } = useContext(AuthContext);\n  const [conversations, setConversations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [showTrialModal, setShowTrialModal] = useState(false);\n  const [phone, setPhone] = useState(userInfo?.phone || '');\n  const [phoneError, setPhoneError] = useState('');\n  const [isStartingTrial, setIsStartingTrial] = useState(false);\n  const [trialError, setTrialError] = useState('');\n  const requestedTrialRef = useRef(false);\n  const [showComposeModal, setShowComposeModal] = useState(false);\n  const [newMessage, setNewMessage] = useState('');\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [selectedPost, setSelectedPost] = useState(null);\n\n  useEffect(() => {\n    const unsubscribe = navigation.addListener('focus', () => {\n      if (userInfo) {\n        fetchConversations();\n      }\n    });\n\n    return unsubscribe;\n  }, [navigation, route]);\n\n  // Add a listener for route.params updates which is used for message sending notifications\n  useEffect(() => {\n    if (route.params?.messageUpdated && userInfo) {\n      console.log('Message update detected, refreshing conversations');\n      fetchConversations();\n      // Clear the param after handling to avoid repeated refreshes\n      navigation.setParams({ messageUpdated: undefined });\n    }\n  }, [route.params?.messageUpdated]);\n\n  // New effect to handle selected user and post for new conversation\n  useEffect(() => {\n    if (route.params?.selectedUser && route.params?.selectedPost && route.params?.showComposeMessage) {\n      // Directly show compose modal - no premium check\n      setSelectedUser(route.params.selectedUser);\n      setSelectedPost(route.params.selectedPost);\n      setShowComposeModal(true);\n    }\n  }, [route.params?.selectedUser, route.params?.selectedPost, route.params?.showComposeMessage]);\n\n  useEffect(() => {\n    if (userInfo) {\n      fetchConversations();\n    }\n  }, [userInfo]);\n\n  const checkAccess = () => {\n    // Just check if user is logged in\n    return !!userInfo;\n  };\n\n  const fetchConversations = async () => {\n    try {\n      setLoading(true);\n      \n      // Try to use the real API endpoint first\n      try {\n        console.log('Attempting to fetch conversations from API...');\n        const apiConversations = await getConversationsList();\n        \n        console.log('API Response:', JSON.stringify(apiConversations));\n        \n        if (apiConversations && apiConversations.length > 0) {\n          console.log('Successfully fetched conversations from API, count:', apiConversations.length);\n          \n          // Format the conversations to match our UI structure\n          const formattedConversations = apiConversations.filter(message => {\n            // Skip messages with missing required properties\n            const isValid = message && message.sender && message.receiver && message.post;\n            if (!isValid) {\n              console.log('Invalid message object:', message);\n            }\n            return isValid;\n          }).map(message => {\n            // Ensure sender and receiver have _id properties\n            if (!message.sender._id || !message.receiver._id || !message.post._id) {\n              console.log('Message has incomplete data:', message);\n              // Create fallback IDs if missing\n              message.sender._id = message.sender._id || `sender_${Date.now()}`;\n              message.receiver._id = message.receiver._id || `receiver_${Date.now()}`;\n              message.post._id = message.post._id || `post_${Date.now()}`;\n            }\n            \n            // Determine if the current user is the sender or recipient\n            console.log('Current user ID:', userInfo._id);\n            console.log('Message sender ID:', message.sender._id);\n            console.log('Message receiver ID:', message.receiver._id);\n            \n            const isSender = message.sender._id.toString() === userInfo._id.toString();\n            console.log('Is current user the sender?', isSender);\n            \n            const otherParty = isSender ? message.receiver : message.sender;\n            console.log('Other party:', otherParty);\n            \n            return {\n              _id: `${otherParty._id}_${message.post._id}`,\n              user: otherParty,\n              post: message.post,\n              lastMessage: message,\n              messages: [message], // We'll get more messages when user opens the conversation\n              unreadCount: message.receiver._id.toString() === userInfo._id.toString() && !message.isRead ? 1 : 0\n            };\n          });\n          \n          console.log('Formatted conversations count:', formattedConversations.length);\n          \n          // Sort by most recent message\n          formattedConversations.sort((a, b) => \n            new Date(b.lastMessage?.createdAt) - new Date(a.lastMessage?.createdAt)\n          );\n          \n          setConversations(formattedConversations);\n          setLoading(false);\n          setRefreshing(false);\n          return;\n        } else {\n          console.log('API returned empty or invalid conversations array:', apiConversations);\n        }\n      } catch (apiError) {\n        console.log('Error fetching from API, falling back to local storage:', apiError);\n      }\n      \n      // If the API call fails, fall back to AsyncStorage\n      // This is a fallback for demonstration when not connected to backend\n      try {\n        const savedConversations = await AsyncStorage.getItem('demo_conversations');\n        \n        if (savedConversations) {\n          try {\n            const parsedConversations = JSON.parse(savedConversations);\n            if (parsedConversations && Array.isArray(parsedConversations) && parsedConversations.length > 0) {\n              // Validate each conversation has required fields\n              const validConversations = parsedConversations.filter(conv => \n                conv && conv.user && conv.user._id && conv.post && conv.post._id\n              );\n              \n              setConversations(validConversations);\n              setLoading(false);\n              setRefreshing(false);\n              return;\n            }\n          } catch (parseError) {\n            console.log('Error parsing saved conversations:', parseError);\n            // If there's an error parsing, continue to create demo conversation\n          }\n        }\n      } catch (storageError) {\n        console.log('Error accessing local storage:', storageError);\n        // Continue to create demo conversation\n      }\n      \n      // Create demo conversation if nothing found\n      const demoConversations = [\n        {\n          _id: 'demo1',\n          user: { \n            _id: 'user1', \n            name: 'John Doe',\n            profileImage: 'https://randomuser.me/api/portraits/men/32.jpg'\n          },\n          lastMessage: {\n            content: 'This is a demo conversation.',\n            createdAt: new Date(),\n            sender: { _id: 'user1', name: 'John Doe' },\n            recipient: { _id: userInfo._id, name: userInfo.name }\n          },\n          post: {\n            _id: 'post1',\n            title: 'Basketball game this weekend'\n          },\n          unreadCount: 1,\n          messages: [\n            {\n              _id: `msg_${Date.now()}`,\n              content: 'This is a demo conversation.',\n              createdAt: new Date(),\n              sender: { _id: 'user1', name: 'John Doe' },\n              recipient: { _id: userInfo._id, name: userInfo.name },\n              post: {\n                _id: 'post1',\n                title: 'Basketball game this weekend'\n              }\n            }\n          ]\n        }\n      ];\n      \n      setConversations(demoConversations);\n      await AsyncStorage.setItem('demo_conversations', JSON.stringify(demoConversations));\n      \n    } catch (error) {\n      console.log('Error fetching conversations:', error);\n      Alert.alert('Error', 'Failed to load conversations. Please try again later.');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    fetchConversations();\n  };\n\n  const goToChat = async (conversation) => {\n    // Validate conversation object has required properties\n    if (!conversation || !conversation.user || !conversation.post) {\n      console.log('Invalid conversation object:', conversation);\n      Alert.alert('Error', 'Cannot open this conversation. Data is incomplete.');\n      return;\n    }\n\n    // Ensure user and post have _id properties\n    if (!conversation.user._id || !conversation.post._id) {\n      console.log('Conversation has missing _id properties:', conversation);\n      Alert.alert('Error', 'Cannot open this conversation. ID information is missing.');\n      return;\n    }\n\n    // Set up the conversation for viewing/replying\n    setSelectedUser(conversation.user);\n    setSelectedPost(conversation.post);\n    setNewMessage(''); // Clear any previous message\n    \n    try {\n      // Try to fetch messages from API first\n      try {\n        console.log('Fetching messages for conversation with:', conversation.user._id);\n        const response = await getMessages(conversation.user._id);\n        \n        if (response.success && response.data && response.data.length > 0) {\n          // Update conversation with full message history\n          const existingConvIndex = conversations.findIndex(c => \n            c._id === conversation._id\n          );\n          \n          if (existingConvIndex !== -1) {\n            const updatedConversations = [...conversations];\n            updatedConversations[existingConvIndex].messages = response.data;\n            setConversations(updatedConversations);\n          }\n        }\n      } catch (apiError) {\n        console.log('Error fetching messages from API:', apiError);\n      }\n      \n      // Open the compose modal instead of navigating to ChatScreen\n      setShowComposeModal(true);\n      \n    } catch (error) {\n      console.log('Error in goToChat:', error);\n      // Even if there's an error, still try to open the modal\n      setShowComposeModal(true);\n    }\n  };\n\n  const handleSendNewMessage = async () => {\n    if (!newMessage.trim() || !selectedUser || !selectedPost) {\n      return;\n    }\n\n    // Store the message before clearing the input for better UX\n    const messageText = newMessage.trim();\n    setNewMessage('');\n    \n    // Create a temporary message to show immediately\n    const tempMessage = {\n      _id: `local_msg_${Date.now()}`,\n      content: messageText,\n      createdAt: new Date().toISOString(),\n      sender: { \n        _id: userInfo._id, \n        name: userInfo.name,\n        email: userInfo.email \n      },\n      receiver: selectedUser,\n      post: selectedPost,\n      sending: true\n    };\n    \n    try {\n      // Update UI immediately for better user experience\n      // Find existing conversation or create new one\n      const conversationId = `${selectedUser._id}_${selectedPost._id}`;\n      const existingConvIndex = conversations.findIndex(c => \n        c.user._id === selectedUser._id && c.post._id === selectedPost._id\n      );\n      \n      let updatedConversations = [...conversations];\n      \n      if (existingConvIndex !== -1) {\n        // Update existing conversation\n        updatedConversations[existingConvIndex] = {\n          ...updatedConversations[existingConvIndex],\n          lastMessage: tempMessage,\n          messages: [\n            tempMessage,\n            ...(updatedConversations[existingConvIndex].messages || [])\n          ]\n        };\n      } else {\n        // Create new conversation\n        const newConversation = {\n          _id: conversationId,\n          user: selectedUser,\n          lastMessage: tempMessage,\n          messages: [tempMessage],\n          post: selectedPost,\n          unreadCount: 0\n        };\n        updatedConversations = [newConversation, ...updatedConversations];\n      }\n      \n      setConversations(updatedConversations);\n      \n      // Now try to send via API\n      const messageData = {\n        recipient: selectedUser._id,\n        content: messageText,\n        post: selectedPost._id\n      };\n      \n      console.log('Sending message via API:', messageData);\n      \n      let response;\n      try {\n        response = await sendDirectMessage(messageData);\n        console.log('API response:', response);\n        \n        // Update the conversation with the actual response\n        const updatedConvs = [...updatedConversations];\n        const convIndex = updatedConvs.findIndex(c => \n          c.user._id === selectedUser._id && c.post._id === selectedPost._id\n        );\n        \n        if (convIndex !== -1) {\n          // Update the message with the real data from the server\n          updatedConvs[convIndex].lastMessage = {\n            ...response,\n            sender: { \n              _id: userInfo._id, \n              name: userInfo.name,\n              email: userInfo.email \n            },\n            receiver: selectedUser,\n            post: selectedPost\n          };\n          \n          // Update the message in the messages array too\n          const msgIndex = updatedConvs[convIndex].messages.findIndex(\n            msg => msg._id === tempMessage._id\n          );\n          \n          if (msgIndex !== -1) {\n            updatedConvs[convIndex].messages[msgIndex] = {\n              ...response,\n              sender: { \n                _id: userInfo._id, \n                name: userInfo.name,\n                email: userInfo.email \n              },\n              receiver: selectedUser,\n              post: selectedPost\n            };\n          }\n          \n          setConversations(updatedConvs);\n        }\n        \n        // Close the compose modal\n        setShowComposeModal(false);\n        \n        // Navigate to ChatScreen with the updated conversation\n        setTimeout(() => {\n          navigation.navigate('Chat', {\n            recipient: selectedUser,\n            post: selectedPost,\n            messageUpdated: Date.now()\n          });\n        }, 200);\n        \n      } catch (apiError) {\n        console.log('Error sending via API, using local fallback:', apiError);\n        \n        // Mark the message as failed in the UI\n        const updatedConvs = [...updatedConversations];\n        const convIndex = updatedConvs.findIndex(c => \n          c.user._id === selectedUser._id && c.post._id === selectedPost._id\n        );\n        \n        if (convIndex !== -1) {\n          // Mark the message as failed\n          const msgIndex = updatedConvs[convIndex].messages.findIndex(\n            msg => msg._id === tempMessage._id\n          );\n          \n          if (msgIndex !== -1) {\n            updatedConvs[convIndex].messages[msgIndex] = {\n              ...updatedConvs[convIndex].messages[msgIndex],\n              sending: false,\n              failed: true\n            };\n          }\n          \n          setConversations(updatedConvs);\n        }\n        \n        Alert.alert('Error', 'Failed to send message. Network issue or server unavailable.');\n      }\n      \n    } catch (error) {\n      console.log('Error saving message:', error);\n      Alert.alert('Error', 'Failed to send message. Please try again.');\n    }\n  };\n\n  // Update the reset function to clear data\n  const resetMessages = async () => {\n    try {\n      // For demo purposes only - clear local storage\n      await AsyncStorage.removeItem('demo_conversations');\n      \n      Alert.alert(\n        'Messages Reset',\n        'Local message cache has been cleared. Messages from the server may still exist. Pull down to refresh and see the changes.',\n        [{ text: 'OK', onPress: () => fetchConversations() }]\n      );\n    } catch (error) {\n      console.log('Error resetting messages:', error);\n      Alert.alert('Error', 'Failed to reset messages.');\n    }\n  };\n\n  // Not logged in view\n  if (!userInfo) {\n    return (\n      <View style={styles.centeredContainer}>\n        <Ionicons name=\"chatbubbles-outline\" size={70} color=\"#0066CC\" />\n        <Text style={styles.noticeTitle}>Login Required</Text>\n        <Text style={styles.noticeText}>\n          Please log in to access your conversations\n        </Text>\n        <TouchableOpacity\n          style={styles.loginButton}\n          onPress={() => navigation.navigate('Login')}\n        >\n          <Text style={styles.loginButtonText}>Login</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  // Show empty state when there are no conversations\n  const renderEmptyState = () => {\n    return (\n      <View style={styles.emptyContainer}>\n        <Ionicons name=\"chatbubbles-outline\" size={70} color=\"#ccc\" />\n        <Text style={styles.emptyTitle}>No Conversations Yet</Text>\n        <Text style={styles.emptyText}>\n          You don't have any messages yet. Find a post you're interested in and start a conversation!\n        </Text>\n        <TouchableOpacity\n          style={styles.findPostsButton}\n          onPress={() => navigation.navigate('Home')}\n        >\n          <Text style={styles.findPostsButtonText}>Find Posts</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  };\n\n  const renderConversationItem = ({ item }) => {\n    // Skip rendering if item doesn't have required properties\n    if (!item || !item.user || !item.lastMessage || !item.post) {\n      console.log('Skipping invalid conversation item:', item);\n      return null;\n    }\n\n    const isUnread = item.unreadCount > 0;\n    const isSenderMe = item.lastMessage?.sender?._id === userInfo?._id;\n    \n    // Create safe display content with fallbacks for missing data\n    const messageContent = item.lastMessage?.content || 'No message content';\n    const messagePreview = isSenderMe \n      ? \"You: \" + messageContent\n      : messageContent;\n    \n    // Check if a message is still sending or failed\n    const isSending = item.lastMessage?.sending;\n    const isFailed = item.lastMessage?.failed;\n\n    // Safely get creation date with fallback\n    const messageDate = item.lastMessage?.createdAt \n      ? new Date(item.lastMessage.createdAt)\n      : new Date();\n\n    return (\n      <TouchableOpacity\n        style={[styles.conversationItem, isUnread && styles.unreadItem]}\n        onPress={() => goToChat(item)}\n      >\n        <View style={styles.avatarContainer}>\n          {item.user?.profileImage ? (\n            <Image\n              source={{ uri: item.user.profileImage }}\n              style={styles.avatar}\n            />\n          ) : (\n            <View style={styles.avatarPlaceholder}>\n              <Ionicons name=\"person\" size={20} color=\"#999\" />\n            </View>\n          )}\n          {isUnread && <View style={styles.unreadDot} />}\n        </View>\n\n        <View style={styles.conversationInfo}>\n          <View style={styles.conversationHeader}>\n            <Text style={styles.username}>{item.user?.name || 'Unknown User'}</Text>\n            <Text style={styles.messageTime}>\n              {messageDate.toLocaleTimeString([], {\n                hour: '2-digit',\n                minute: '2-digit'\n              })}\n            </Text>\n          </View>\n\n          <View style={styles.messagePreviewContainer}>\n            <Text \n              style={[\n                styles.messagePreview, \n                isUnread && styles.unreadText,\n                isFailed && styles.failedText\n              ]} \n              numberOfLines={1}\n            >\n              {isSending && '🕒 '}\n              {isFailed && '❌ '}\n              {messagePreview}\n            </Text>\n            \n            {isUnread && item.unreadCount > 0 && (\n              <View style={styles.unreadBadge}>\n                <Text style={styles.unreadCount}>\n                  {item.unreadCount > 99 ? '99+' : item.unreadCount}\n                </Text>\n              </View>\n            )}\n          </View>\n\n          <Text style={styles.postTitle} numberOfLines={1}>\n            Re: {item.post?.title || 'Unknown Post'}\n          </Text>\n        </View>\n      </TouchableOpacity>\n    );\n  };\n\n  // Add this function to render the compose message modal\n  const renderComposeModal = () => {\n    // Find the conversation that matches the selected user and post\n    const selectedConversation = conversations.find(\n      c => c.user._id === selectedUser?._id && c.post._id === selectedPost?._id\n    );\n    \n    // Get messages from the selected conversation\n    const conversationMessages = selectedConversation?.messages || [];\n    \n    return (\n    <Modal\n      visible={showComposeModal}\n      transparent={true}\n      animationType=\"slide\"\n      onRequestClose={() => setShowComposeModal(false)}\n    >\n        <View style={styles.fullScreenModalOverlay}>\n          <View style={styles.chatModalContent}>\n          <View style={styles.composeModalHeader}>\n              <View style={styles.chatHeaderInfo}>\n                {selectedUser?.profileImage ? (\n                  <Image\n                    source={{ uri: selectedUser.profileImage }}\n                    style={styles.chatHeaderAvatar}\n                  />\n                ) : (\n                  <View style={styles.chatHeaderAvatarPlaceholder}>\n                    <Ionicons name=\"person\" size={18} color=\"#ccc\" />\n                  </View>\n                )}\n                <View style={styles.chatHeaderTextContainer}>\n            <Text style={styles.composeModalTitle}>\n                    {selectedUser?.name || 'Chat'}\n            </Text>\n                  {selectedPost && (\n                    <Text style={styles.chatHeaderPostTitle} numberOfLines={1}>\n                      Re: {selectedPost.title}\n                    </Text>\n                  )}\n                </View>\n              </View>\n            <TouchableOpacity onPress={() => setShowComposeModal(false)}>\n              <Ionicons name=\"close\" size={24} color=\"#333\" />\n            </TouchableOpacity>\n          </View>\n          \n            <View style={styles.chatMessagesContainer}>\n              {conversationMessages.length > 0 ? (\n                <FlatList\n                  data={conversationMessages}\n                  keyExtractor={(item) => item._id || `msg_${Date.now()}_${Math.random()}`}\n                  renderItem={({ item }) => {\n                    // Skip rendering if item doesn't have required properties\n                    if (!item || !item.content) {\n                      return null;\n                    }\n                    \n                    const isFromMe = item.sender?._id === userInfo?._id;\n                    const messageTime = item.createdAt ? new Date(item.createdAt) : new Date();\n                    \n                    return (\n                      <View style={[\n                        styles.messageBubble,\n                        isFromMe ? styles.myMessage : styles.theirMessage\n                      ]}>\n                        <Text style={[\n                          styles.messageText,\n                          isFromMe ? styles.myMessageText : styles.theirMessageText\n                        ]}>\n                          {item.content}\n                        </Text>\n                        <Text style={[\n                          styles.messageTime,\n                          isFromMe ? styles.myMessageTime : styles.theirMessageTime\n                        ]}>\n                          {messageTime.toLocaleTimeString([], \n                            { hour: '2-digit', minute: '2-digit' }\n                          )}\n                        </Text>\n                      </View>\n                    );\n                  }}\n                  inverted={true}\n                  contentContainerStyle={styles.messagesListContent}\n                />\n              ) : (\n                <View style={styles.noMessagesContainer}>\n                  <Ionicons name=\"chatbubble-outline\" size={40} color=\"#ccc\" />\n                  <Text style={styles.noMessagesText}>No messages yet</Text>\n                  <Text style={styles.noMessagesSubtext}>\n                    Start the conversation below\n                  </Text>\n              </View>\n            )}\n            </View>\n            \n            <View style={styles.chatInputContainer}>\n            <TextInput\n                style={styles.chatInput}\n              placeholder=\"Type your message here...\"\n              value={newMessage}\n              onChangeText={setNewMessage}\n              multiline\n                maxHeight={100}\n            />\n            <TouchableOpacity\n              style={[\n                styles.sendButton,\n                !newMessage.trim() && styles.sendButtonDisabled\n              ]}\n              onPress={handleSendNewMessage}\n              disabled={!newMessage.trim()}\n            >\n                <Ionicons \n                  name=\"send\" \n                  size={20} \n                  color={newMessage.trim() ? \"white\" : \"#999\"} \n                />\n            </TouchableOpacity>\n          </View>\n        </View>\n        </View>\n    </Modal>\n  );\n  };\n\n  if (loading && !refreshing) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#0066CC\" />\n        <Text style={styles.loadingText}>Loading conversations...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {renderComposeModal()}\n      \n      <FlatList\n        data={conversations}\n        keyExtractor={(item) => item._id}\n        renderItem={renderConversationItem}\n        onRefresh={handleRefresh}\n        refreshing={refreshing}\n        ListEmptyComponent={renderEmptyState}\n        contentContainerStyle={conversations.length === 0 ? { flex: 1 } : null}\n      />\n      \n      {/* Chat buttons - show for all logged in users */}\n      {/* <TouchableOpacity\n        style={styles.newChatButton}\n        onPress={() => navigation.navigate('Home')}\n      >\n        <Ionicons name=\"add\" size={24} color=\"white\" />\n        <Text style={styles.newChatButtonText}>Find Posts</Text>\n      </TouchableOpacity>\n       */}\n      {/* Add a reset button for testing */}\n      {/* <TouchableOpacity\n        style={styles.resetButton}\n        onPress={() => {\n          Alert.alert(\n            'Reset Messages',\n            'This will clear all messages for all users. Are you sure?',\n            [\n              { text: 'Cancel', style: 'cancel' },\n              { text: 'Reset', onPress: resetMessages, style: 'destructive' }\n            ]\n          );\n        }}\n      >\n        <Ionicons name=\"trash\" size={20} color=\"white\" />\n        <Text style={styles.resetButtonText}>Reset Messages</Text>\n      </TouchableOpacity> */}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f8f8',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 12,\n    fontSize: 16,\n    color: '#666',\n  },\n  conversationItem: {\n    flexDirection: 'row',\n    padding: 15,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  unreadItem: {\n    backgroundColor: '#f0f7ff',\n  },\n  avatarContainer: {\n    marginRight: 12,\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n  },\n  avatarPlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  conversationInfo: {\n    flex: 1,\n  },\n  conversationHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 4,\n  },\n  username: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n  },\n  messageTime: {\n    fontSize: 12,\n    color: '#888',\n  },\n  messagePreviewContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginBottom: 4,\n    flex: 1,\n  },\n  messagePreview: {\n    fontSize: 14,\n    color: '#666',\n    flex: 1,\n    marginRight: 8,\n  },\n  unreadText: {\n    fontWeight: 'bold',\n    color: '#000',\n  },\n  failedText: {\n    color: 'red',\n  },\n  unreadBadge: {\n    backgroundColor: '#0066CC',\n    width: 20,\n    height: 20,\n    borderRadius: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 8,\n    alignSelf: 'center',\n  },\n  unreadCount: {\n    color: 'white',\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  postTitle: {\n    fontSize: 14,\n    color: '#0066CC',\n    marginBottom: 4,\n  },\n  centeredContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  noticeTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginTop: 16,\n    marginBottom: 8,\n    color: '#333',\n  },\n  noticeText: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 24,\n    color: '#666',\n    lineHeight: 22,\n  },\n  loginButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    marginTop: 8,\n  },\n  loginButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  trialButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    marginBottom: 12,\n    width: '80%',\n    alignItems: 'center',\n  },\n  trialButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  upgradeButton: {\n    borderWidth: 1,\n    borderColor: '#0066CC',\n    backgroundColor: 'transparent',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    width: '80%',\n    alignItems: 'center',\n  },\n  upgradeButtonText: {\n    color: '#0066CC',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginTop: 16,\n    marginBottom: 8,\n    color: '#333',\n  },\n  emptyText: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 24,\n    color: '#666',\n    lineHeight: 22,\n  },\n  findPostsButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n  },\n  findPostsButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  newChatButton: {\n    position: 'absolute',\n    right: 20,\n    bottom: 20,\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n    elevation: 3,\n  },\n  newChatButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    marginLeft: 4,\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    padding: 20,\n  },\n  trialModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    width: '85%',\n    maxWidth: 400,\n    overflow: 'hidden',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.3,\n    shadowRadius: 4,\n  },\n  trialModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  trialModalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  trialModalBody: {\n    padding: 20,\n    alignItems: 'center',\n  },\n  trialIcon: {\n    marginBottom: 15,\n  },\n  trialTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 10,\n  },\n  trialDescription: {\n    fontSize: 16,\n    color: '#333',\n    textAlign: 'center',\n    marginBottom: 20,\n    lineHeight: 24,\n  },\n  benefitsContainer: {\n    marginBottom: 20,\n  },\n  benefitRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  benefitText: {\n    fontSize: 16,\n    color: '#333',\n    marginLeft: 8,\n  },\n  phoneInputContainer: {\n    width: '100%',\n    marginBottom: 20,\n  },\n  phoneLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 8,\n    color: '#333',\n  },\n  phoneInputWrapper: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 8,\n    padding: 12,\n  },\n  phoneIcon: {\n    marginRight: 8,\n  },\n  phoneInput: {\n    flex: 1,\n    fontSize: 16,\n  },\n  errorText: {\n    color: 'red',\n    fontSize: 12,\n    marginTop: 5,\n  },\n  startTrialButton: {\n    backgroundColor: '#0066CC',\n    padding: 12,\n    borderRadius: 8,\n    flex: 1.5,\n    alignItems: 'center',\n  },\n  startTrialButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n  },\n  termsText: {\n    fontSize: 12,\n    color: '#666',\n    textAlign: 'center',\n    marginTop: 10,\n  },\n  statusBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f0f0f0',\n    paddingVertical: 4,\n    paddingHorizontal: 8,\n    borderRadius: 12,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n    marginLeft: 4,\n  },\n  composeModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    width: '100%',\n    maxWidth: 400,\n    overflow: 'hidden',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.3,\n    shadowRadius: 4,\n  },\n  composeModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n    backgroundColor: 'white',\n  },\n  chatHeaderInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  chatHeaderAvatar: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    marginRight: 8,\n  },\n  chatHeaderAvatarPlaceholder: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 8,\n  },\n  chatHeaderTextContainer: {\n    flexDirection: 'column',\n    flex: 1,\n  },\n  composeModalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  chatHeaderPostTitle: {\n    fontSize: 14,\n    color: '#666',\n  },\n  chatMessagesContainer: {\n    flex: 1,\n    backgroundColor: '#f8f8f8',\n  },\n  messagesListContent: {\n    padding: 16,\n    flexGrow: 1,\n    justifyContent: 'flex-end',\n  },\n  messageBubble: {\n    maxWidth: '80%',\n    padding: 12,\n    borderRadius: 18,\n    marginBottom: 8,\n  },\n  myMessage: {\n    backgroundColor: '#0066CC',\n    alignSelf: 'flex-end',\n    borderBottomRightRadius: 4,\n  },\n  theirMessage: {\n    backgroundColor: 'white',\n    alignSelf: 'flex-start',\n    borderBottomLeftRadius: 4,\n  },\n  messageText: {\n    fontSize: 16,\n  },\n  myMessageText: {\n    color: 'white',\n  },\n  theirMessageText: {\n    color: '#333',\n  },\n  messageTime: {\n    fontSize: 12,\n    marginTop: 4,\n    alignSelf: 'flex-end',\n  },\n  myMessageTime: {\n    color: 'rgba(255, 255, 255, 0.7)',\n  },\n  theirMessageTime: {\n    color: 'rgba(0, 0, 0, 0.5)',\n  },\n  chatInputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: 'white',\n    borderTopWidth: 1,\n    borderTopColor: '#eee',\n  },\n  chatInput: {\n    flex: 1,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 20,\n    marginRight: 10,\n    maxHeight: 100,\n  },\n  sendButton: {\n    backgroundColor: '#0066CC',\n    borderRadius: 25,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  sendButtonDisabled: {\n    backgroundColor: '#cccccc',\n  },\n  noMessagesContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  noMessagesText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#666',\n    marginTop: 10,\n  },\n  noMessagesSubtext: {\n    fontSize: 14,\n    color: '#999',\n    textAlign: 'center',\n    marginTop: 5,\n  },\n  resetButton: {\n    position: 'absolute',\n    left: 20,\n    bottom: 20,\n    backgroundColor: '#FF3B30',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n    elevation: 3,\n  },\n  resetButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    marginLeft: 4,\n  },\n  fullScreenModalOverlay: {\n    flex: 1,\n    backgroundColor: 'white',\n  },\n  chatModalContent: {\n    flex: 1,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  unreadDot: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 12,\n    height: 12,\n    backgroundColor: '#0066CC',\n    borderRadius: 6,\n    borderWidth: 2,\n    borderColor: 'white',\n  },\n});\n\nexport default ChatListScreen; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}