{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useState, useEffect, useContext, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { AuthContext } from \"../context/AuthContext\";\nimport axios from 'axios';\nimport { API_URL } from \"../config\";\nimport { getConversationsList, sendDirectMessage, getMessages } from \"../services/api\";\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar ChatListScreen = function ChatListScreen(_ref) {\n  var _route$params2, _route$params6, _route$params7, _route$params8;\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var _useContext = useContext(AuthContext),\n    userInfo = _useContext.userInfo,\n    requireLogin = _useContext.requireLogin;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    conversations = _useState2[0],\n    setConversations = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    refreshing = _useState6[0],\n    setRefreshing = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    showTrialModal = _useState8[0],\n    setShowTrialModal = _useState8[1];\n  var _useState9 = useState((userInfo == null ? void 0 : userInfo.phone) || ''),\n    _useState10 = _slicedToArray(_useState9, 2),\n    phone = _useState10[0],\n    setPhone = _useState10[1];\n  var _useState11 = useState(''),\n    _useState12 = _slicedToArray(_useState11, 2),\n    phoneError = _useState12[0],\n    setPhoneError = _useState12[1];\n  var _useState13 = useState(false),\n    _useState14 = _slicedToArray(_useState13, 2),\n    isStartingTrial = _useState14[0],\n    setIsStartingTrial = _useState14[1];\n  var _useState15 = useState(''),\n    _useState16 = _slicedToArray(_useState15, 2),\n    trialError = _useState16[0],\n    setTrialError = _useState16[1];\n  var requestedTrialRef = useRef(false);\n  var _useState17 = useState(false),\n    _useState18 = _slicedToArray(_useState17, 2),\n    showComposeModal = _useState18[0],\n    setShowComposeModal = _useState18[1];\n  var _useState19 = useState(''),\n    _useState20 = _slicedToArray(_useState19, 2),\n    newMessage = _useState20[0],\n    setNewMessage = _useState20[1];\n  var _useState21 = useState(null),\n    _useState22 = _slicedToArray(_useState21, 2),\n    selectedUser = _useState22[0],\n    setSelectedUser = _useState22[1];\n  var _useState23 = useState(null),\n    _useState24 = _slicedToArray(_useState23, 2),\n    selectedPost = _useState24[0],\n    setSelectedPost = _useState24[1];\n  useEffect(function () {\n    var unsubscribe = navigation.addListener('focus', function () {\n      if (userInfo) {\n        fetchConversations();\n      }\n    });\n    return unsubscribe;\n  }, [navigation, route]);\n  useEffect(function () {\n    var _route$params;\n    if ((_route$params = route.params) != null && _route$params.messageUpdated && userInfo) {\n      console.log('Message update detected, refreshing conversations');\n      fetchConversations();\n      navigation.setParams({\n        messageUpdated: undefined\n      });\n    }\n  }, [(_route$params2 = route.params) == null ? void 0 : _route$params2.messageUpdated]);\n  useEffect(function () {\n    var _route$params3, _route$params4, _route$params5;\n    if ((_route$params3 = route.params) != null && _route$params3.selectedUser && (_route$params4 = route.params) != null && _route$params4.selectedPost && (_route$params5 = route.params) != null && _route$params5.showComposeMessage) {\n      setSelectedUser(route.params.selectedUser);\n      setSelectedPost(route.params.selectedPost);\n      setShowComposeModal(true);\n    }\n  }, [(_route$params6 = route.params) == null ? void 0 : _route$params6.selectedUser, (_route$params7 = route.params) == null ? void 0 : _route$params7.selectedPost, (_route$params8 = route.params) == null ? void 0 : _route$params8.showComposeMessage]);\n  useEffect(function () {\n    if (userInfo) {\n      fetchConversations();\n    }\n  }, [userInfo]);\n  var checkAccess = function checkAccess() {\n    return !!userInfo;\n  };\n  var fetchConversations = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        setLoading(true);\n        try {\n          console.log('Attempting to fetch conversations from API...');\n          var apiConversations = yield getConversationsList();\n          if (apiConversations && apiConversations.length > 0) {\n            console.log('Successfully fetched conversations from API');\n            var formattedConversations = apiConversations.map(function (message) {\n              var otherParty = message.sender._id === userInfo._id ? message.receiver : message.sender;\n              return {\n                _id: `${otherParty._id}_${message.post._id}`,\n                user: otherParty,\n                post: message.post,\n                lastMessage: message,\n                messages: [message],\n                unreadCount: message.receiver._id === userInfo._id && !message.isRead ? 1 : 0\n              };\n            });\n            formattedConversations.sort(function (a, b) {\n              var _b$lastMessage, _a$lastMessage;\n              return new Date((_b$lastMessage = b.lastMessage) == null ? void 0 : _b$lastMessage.createdAt) - new Date((_a$lastMessage = a.lastMessage) == null ? void 0 : _a$lastMessage.createdAt);\n            });\n            setConversations(formattedConversations);\n            setLoading(false);\n            setRefreshing(false);\n            return;\n          }\n        } catch (apiError) {\n          console.log('Error fetching from API, falling back to local storage:', apiError);\n        }\n        var savedConversations = yield AsyncStorage.getItem('demo_conversations');\n        if (savedConversations) {\n          var parsedConversations = JSON.parse(savedConversations);\n          if (parsedConversations && parsedConversations.length > 0) {\n            setConversations(parsedConversations);\n            setLoading(false);\n            setRefreshing(false);\n            return;\n          }\n        }\n        var demoConversations = [{\n          _id: 'demo1',\n          user: {\n            _id: 'user1',\n            name: 'John Doe',\n            profileImage: 'https://randomuser.me/api/portraits/men/32.jpg'\n          },\n          lastMessage: {\n            content: 'This is a demo conversation.',\n            createdAt: new Date(),\n            sender: {\n              _id: 'user1',\n              name: 'John Doe'\n            },\n            recipient: {\n              _id: userInfo._id,\n              name: userInfo.name\n            }\n          },\n          post: {\n            _id: 'post1',\n            title: 'Basketball game this weekend'\n          },\n          unreadCount: 1,\n          messages: [{\n            _id: `msg_${Date.now()}`,\n            content: 'This is a demo conversation.',\n            createdAt: new Date(),\n            sender: {\n              _id: 'user1',\n              name: 'John Doe'\n            },\n            recipient: {\n              _id: userInfo._id,\n              name: userInfo.name\n            },\n            post: {\n              _id: 'post1',\n              title: 'Basketball game this weekend'\n            }\n          }]\n        }];\n        setConversations(demoConversations);\n        yield AsyncStorage.setItem('demo_conversations', JSON.stringify(demoConversations));\n      } catch (error) {\n        console.log('Error fetching conversations:', error);\n        Alert.alert('Error', 'Failed to load conversations. Please try again later.');\n      } finally {\n        setLoading(false);\n        setRefreshing(false);\n      }\n    });\n    return function fetchConversations() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleRefresh = function handleRefresh() {\n    setRefreshing(true);\n    fetchConversations();\n  };\n  var goToChat = function () {\n    var _ref3 = _asyncToGenerator(function* (conversation) {\n      setSelectedUser(conversation.user);\n      setSelectedPost(conversation.post);\n      setNewMessage('');\n      try {\n        try {\n          console.log('Fetching messages for conversation with:', conversation.user._id);\n          var response = yield getMessages(conversation.user._id);\n          if (response.success && response.data && response.data.length > 0) {\n            var existingConvIndex = conversations.findIndex(function (c) {\n              return c._id === conversation._id;\n            });\n            if (existingConvIndex !== -1) {\n              var updatedConversations = _toConsumableArray(conversations);\n              updatedConversations[existingConvIndex].messages = response.data;\n              setConversations(updatedConversations);\n            }\n          }\n        } catch (apiError) {\n          console.log('Error fetching messages from API:', apiError);\n        }\n        setShowComposeModal(true);\n      } catch (error) {\n        console.log('Error in goToChat:', error);\n        setShowComposeModal(true);\n      }\n    });\n    return function goToChat(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var handleSendNewMessage = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      if (!newMessage.trim() || !selectedUser || !selectedPost) {\n        return;\n      }\n      var messageText = newMessage.trim();\n      setNewMessage('');\n      var tempMessage = {\n        _id: `local_msg_${Date.now()}`,\n        content: messageText,\n        createdAt: new Date().toISOString(),\n        sender: {\n          _id: userInfo._id,\n          name: userInfo.name,\n          email: userInfo.email\n        },\n        receiver: selectedUser,\n        post: selectedPost,\n        sending: true\n      };\n      try {\n        var conversationId = `${selectedUser._id}_${selectedPost._id}`;\n        var existingConvIndex = conversations.findIndex(function (c) {\n          return c.user._id === selectedUser._id && c.post._id === selectedPost._id;\n        });\n        var updatedConversations = _toConsumableArray(conversations);\n        if (existingConvIndex !== -1) {\n          updatedConversations[existingConvIndex] = _objectSpread(_objectSpread({}, updatedConversations[existingConvIndex]), {}, {\n            lastMessage: tempMessage,\n            messages: [tempMessage].concat(_toConsumableArray(updatedConversations[existingConvIndex].messages || []))\n          });\n        } else {\n          var newConversation = {\n            _id: conversationId,\n            user: selectedUser,\n            lastMessage: tempMessage,\n            messages: [tempMessage],\n            post: selectedPost,\n            unreadCount: 0\n          };\n          updatedConversations = [newConversation].concat(_toConsumableArray(updatedConversations));\n        }\n        setConversations(updatedConversations);\n        var messageData = {\n          recipient: selectedUser._id,\n          content: messageText,\n          post: selectedPost._id\n        };\n        console.log('Sending message via API:', messageData);\n        var response;\n        try {\n          response = yield sendDirectMessage(messageData);\n          console.log('API response:', response);\n          var updatedConvs = _toConsumableArray(updatedConversations);\n          var convIndex = updatedConvs.findIndex(function (c) {\n            return c.user._id === selectedUser._id && c.post._id === selectedPost._id;\n          });\n          if (convIndex !== -1) {\n            updatedConvs[convIndex].lastMessage = _objectSpread(_objectSpread({}, response), {}, {\n              sender: {\n                _id: userInfo._id,\n                name: userInfo.name,\n                email: userInfo.email\n              },\n              receiver: selectedUser,\n              post: selectedPost\n            });\n            var msgIndex = updatedConvs[convIndex].messages.findIndex(function (msg) {\n              return msg._id === tempMessage._id;\n            });\n            if (msgIndex !== -1) {\n              updatedConvs[convIndex].messages[msgIndex] = _objectSpread(_objectSpread({}, response), {}, {\n                sender: {\n                  _id: userInfo._id,\n                  name: userInfo.name,\n                  email: userInfo.email\n                },\n                receiver: selectedUser,\n                post: selectedPost\n              });\n            }\n            setConversations(updatedConvs);\n          }\n          setShowComposeModal(false);\n          setTimeout(function () {\n            navigation.navigate('Chat', {\n              recipient: selectedUser,\n              post: selectedPost,\n              messageUpdated: Date.now()\n            });\n          }, 200);\n        } catch (apiError) {\n          console.log('Error sending via API, using local fallback:', apiError);\n          var _updatedConvs = _toConsumableArray(updatedConversations);\n          var _convIndex = _updatedConvs.findIndex(function (c) {\n            return c.user._id === selectedUser._id && c.post._id === selectedPost._id;\n          });\n          if (_convIndex !== -1) {\n            var _msgIndex = _updatedConvs[_convIndex].messages.findIndex(function (msg) {\n              return msg._id === tempMessage._id;\n            });\n            if (_msgIndex !== -1) {\n              _updatedConvs[_convIndex].messages[_msgIndex] = _objectSpread(_objectSpread({}, _updatedConvs[_convIndex].messages[_msgIndex]), {}, {\n                sending: false,\n                failed: true\n              });\n            }\n            setConversations(_updatedConvs);\n          }\n          Alert.alert('Error', 'Failed to send message. Network issue or server unavailable.');\n        }\n      } catch (error) {\n        console.log('Error saving message:', error);\n        Alert.alert('Error', 'Failed to send message. Please try again.');\n      }\n    });\n    return function handleSendNewMessage() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var resetMessages = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      try {\n        yield AsyncStorage.removeItem('demo_conversations');\n        Alert.alert('Messages Reset', 'Local message cache has been cleared. Messages from the server may still exist. Pull down to refresh and see the changes.', [{\n          text: 'OK',\n          onPress: function onPress() {\n            return fetchConversations();\n          }\n        }]);\n      } catch (error) {\n        console.log('Error resetting messages:', error);\n        Alert.alert('Error', 'Failed to reset messages.');\n      }\n    });\n    return function resetMessages() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  if (!userInfo) {\n    return _jsxs(View, {\n      style: styles.centeredContainer,\n      children: [_jsx(Ionicons, {\n        name: \"chatbubbles-outline\",\n        size: 70,\n        color: \"#0066CC\"\n      }), _jsx(Text, {\n        style: styles.noticeTitle,\n        children: \"Login Required\"\n      }), _jsx(Text, {\n        style: styles.noticeText,\n        children: \"Please log in to access your conversations\"\n      }), _jsx(TouchableOpacity, {\n        style: styles.loginButton,\n        onPress: function onPress() {\n          return navigation.navigate('Login');\n        },\n        children: _jsx(Text, {\n          style: styles.loginButtonText,\n          children: \"Login\"\n        })\n      })]\n    });\n  }\n  var renderEmptyState = function renderEmptyState() {\n    return _jsxs(View, {\n      style: styles.emptyContainer,\n      children: [_jsx(Ionicons, {\n        name: \"chatbubbles-outline\",\n        size: 70,\n        color: \"#ccc\"\n      }), _jsx(Text, {\n        style: styles.emptyTitle,\n        children: \"No Conversations Yet\"\n      }), _jsx(Text, {\n        style: styles.emptyText,\n        children: \"You don't have any messages yet. Find a post you're interested in and start a conversation!\"\n      }), _jsx(TouchableOpacity, {\n        style: styles.findPostsButton,\n        onPress: function onPress() {\n          return navigation.navigate('Home');\n        },\n        children: _jsx(Text, {\n          style: styles.findPostsButtonText,\n          children: \"Find Posts\"\n        })\n      })]\n    });\n  };\n  var renderConversationItem = function renderConversationItem(_ref6) {\n    var _item$lastMessage, _item$lastMessage$sen, _item$lastMessage2, _item$lastMessage3, _item$lastMessage4, _item$lastMessage5, _item$user, _item$user2, _item$lastMessage6, _item$post;\n    var item = _ref6.item;\n    var isUnread = item.unreadCount > 0;\n    var isSenderMe = ((_item$lastMessage = item.lastMessage) == null ? void 0 : (_item$lastMessage$sen = _item$lastMessage.sender) == null ? void 0 : _item$lastMessage$sen._id) === (userInfo == null ? void 0 : userInfo._id);\n    var messagePreview = isSenderMe ? `You: ${(_item$lastMessage2 = item.lastMessage) == null ? void 0 : _item$lastMessage2.content}` : (_item$lastMessage3 = item.lastMessage) == null ? void 0 : _item$lastMessage3.content;\n    var isSending = (_item$lastMessage4 = item.lastMessage) == null ? void 0 : _item$lastMessage4.sending;\n    var isFailed = (_item$lastMessage5 = item.lastMessage) == null ? void 0 : _item$lastMessage5.failed;\n    return _jsxs(TouchableOpacity, {\n      style: [styles.conversationItem, isUnread && styles.unreadItem],\n      onPress: function onPress() {\n        return goToChat(item);\n      },\n      children: [_jsxs(View, {\n        style: styles.avatarContainer,\n        children: [(_item$user = item.user) != null && _item$user.profileImage ? _jsx(Image, {\n          source: {\n            uri: item.user.profileImage\n          },\n          style: styles.avatar\n        }) : _jsx(View, {\n          style: styles.avatarPlaceholder,\n          children: _jsx(Ionicons, {\n            name: \"person\",\n            size: 20,\n            color: \"#999\"\n          })\n        }), isUnread && _jsx(View, {\n          style: styles.unreadDot\n        })]\n      }), _jsxs(View, {\n        style: styles.conversationInfo,\n        children: [_jsxs(View, {\n          style: styles.conversationHeader,\n          children: [_jsx(Text, {\n            style: styles.username,\n            children: (_item$user2 = item.user) == null ? void 0 : _item$user2.name\n          }), _jsx(Text, {\n            style: styles.messageTime,\n            children: new Date((_item$lastMessage6 = item.lastMessage) == null ? void 0 : _item$lastMessage6.createdAt).toLocaleTimeString([], {\n              hour: '2-digit',\n              minute: '2-digit'\n            })\n          })]\n        }), _jsxs(View, {\n          style: styles.messagePreviewContainer,\n          children: [_jsxs(Text, {\n            style: [styles.messagePreview, isUnread && styles.unreadText, isFailed && styles.failedText],\n            numberOfLines: 1,\n            children: [isSending && '🕒 ', isFailed && '❌ ', messagePreview]\n          }), isUnread && item.unreadCount > 0 && _jsx(View, {\n            style: styles.unreadBadge,\n            children: _jsx(Text, {\n              style: styles.unreadCount,\n              children: item.unreadCount > 99 ? '99+' : item.unreadCount\n            })\n          })]\n        }), _jsxs(Text, {\n          style: styles.postTitle,\n          numberOfLines: 1,\n          children: [\"Re: \", (_item$post = item.post) == null ? void 0 : _item$post.title]\n        })]\n      })]\n    });\n  };\n  var renderComposeModal = function renderComposeModal() {\n    var selectedConversation = conversations.find(function (c) {\n      return c.user._id === (selectedUser == null ? void 0 : selectedUser._id) && c.post._id === (selectedPost == null ? void 0 : selectedPost._id);\n    });\n    var conversationMessages = (selectedConversation == null ? void 0 : selectedConversation.messages) || [];\n    return _jsx(Modal, {\n      visible: showComposeModal,\n      transparent: true,\n      animationType: \"slide\",\n      onRequestClose: function onRequestClose() {\n        return setShowComposeModal(false);\n      },\n      children: _jsx(View, {\n        style: styles.fullScreenModalOverlay,\n        children: _jsxs(View, {\n          style: styles.chatModalContent,\n          children: [_jsxs(View, {\n            style: styles.composeModalHeader,\n            children: [_jsxs(View, {\n              style: styles.chatHeaderInfo,\n              children: [selectedUser != null && selectedUser.profileImage ? _jsx(Image, {\n                source: {\n                  uri: selectedUser.profileImage\n                },\n                style: styles.chatHeaderAvatar\n              }) : _jsx(View, {\n                style: styles.chatHeaderAvatarPlaceholder,\n                children: _jsx(Ionicons, {\n                  name: \"person\",\n                  size: 18,\n                  color: \"#ccc\"\n                })\n              }), _jsxs(View, {\n                style: styles.chatHeaderTextContainer,\n                children: [_jsx(Text, {\n                  style: styles.composeModalTitle,\n                  children: (selectedUser == null ? void 0 : selectedUser.name) || 'Chat'\n                }), selectedPost && _jsxs(Text, {\n                  style: styles.chatHeaderPostTitle,\n                  numberOfLines: 1,\n                  children: [\"Re: \", selectedPost.title]\n                })]\n              })]\n            }), _jsx(TouchableOpacity, {\n              onPress: function onPress() {\n                return setShowComposeModal(false);\n              },\n              children: _jsx(Ionicons, {\n                name: \"close\",\n                size: 24,\n                color: \"#333\"\n              })\n            })]\n          }), _jsx(View, {\n            style: styles.chatMessagesContainer,\n            children: conversationMessages.length > 0 ? _jsx(FlatList, {\n              data: conversationMessages,\n              keyExtractor: function keyExtractor(item) {\n                return item._id;\n              },\n              renderItem: function renderItem(_ref7) {\n                var _item$sender;\n                var item = _ref7.item;\n                var isFromMe = ((_item$sender = item.sender) == null ? void 0 : _item$sender._id) === (userInfo == null ? void 0 : userInfo._id);\n                return _jsxs(View, {\n                  style: [styles.messageBubble, isFromMe ? styles.myMessage : styles.theirMessage],\n                  children: [_jsx(Text, {\n                    style: [styles.messageText, isFromMe ? styles.myMessageText : styles.theirMessageText],\n                    children: item.content\n                  }), _jsx(Text, {\n                    style: [styles.messageTime, isFromMe ? styles.myMessageTime : styles.theirMessageTime],\n                    children: new Date(item.createdAt).toLocaleTimeString([], {\n                      hour: '2-digit',\n                      minute: '2-digit'\n                    })\n                  })]\n                });\n              },\n              inverted: true,\n              contentContainerStyle: styles.messagesListContent\n            }) : _jsxs(View, {\n              style: styles.noMessagesContainer,\n              children: [_jsx(Ionicons, {\n                name: \"chatbubble-outline\",\n                size: 40,\n                color: \"#ccc\"\n              }), _jsx(Text, {\n                style: styles.noMessagesText,\n                children: \"No messages yet\"\n              }), _jsx(Text, {\n                style: styles.noMessagesSubtext,\n                children: \"Start the conversation below\"\n              })]\n            })\n          }), _jsxs(View, {\n            style: styles.chatInputContainer,\n            children: [_jsx(TextInput, {\n              style: styles.chatInput,\n              placeholder: \"Type your message here...\",\n              value: newMessage,\n              onChangeText: setNewMessage,\n              multiline: true,\n              maxHeight: 100\n            }), _jsx(TouchableOpacity, {\n              style: [styles.sendButton, !newMessage.trim() && styles.sendButtonDisabled],\n              onPress: handleSendNewMessage,\n              disabled: !newMessage.trim(),\n              children: _jsx(Ionicons, {\n                name: \"send\",\n                size: 20,\n                color: newMessage.trim() ? \"white\" : \"#999\"\n              })\n            })]\n          })]\n        })\n      })\n    });\n  };\n  if (loading && !refreshing) {\n    return _jsxs(View, {\n      style: styles.loadingContainer,\n      children: [_jsx(ActivityIndicator, {\n        size: \"large\",\n        color: \"#0066CC\"\n      }), _jsx(Text, {\n        style: styles.loadingText,\n        children: \"Loading conversations...\"\n      })]\n    });\n  }\n  return _jsxs(View, {\n    style: styles.container,\n    children: [renderComposeModal(), _jsx(FlatList, {\n      data: conversations,\n      keyExtractor: function keyExtractor(item) {\n        return item._id;\n      },\n      renderItem: renderConversationItem,\n      onRefresh: handleRefresh,\n      refreshing: refreshing,\n      ListEmptyComponent: renderEmptyState,\n      contentContainerStyle: conversations.length === 0 ? {\n        flex: 1\n      } : null\n    }), _jsxs(TouchableOpacity, {\n      style: styles.newChatButton,\n      onPress: function onPress() {\n        return navigation.navigate('Home');\n      },\n      children: [_jsx(Ionicons, {\n        name: \"add\",\n        size: 24,\n        color: \"white\"\n      }), _jsx(Text, {\n        style: styles.newChatButtonText,\n        children: \"Find Posts\"\n      })]\n    }), _jsxs(TouchableOpacity, {\n      style: styles.resetButton,\n      onPress: function onPress() {\n        Alert.alert('Reset Messages', 'This will clear all messages for all users. Are you sure?', [{\n          text: 'Cancel',\n          style: 'cancel'\n        }, {\n          text: 'Reset',\n          onPress: resetMessages,\n          style: 'destructive'\n        }]);\n      },\n      children: [_jsx(Ionicons, {\n        name: \"trash\",\n        size: 20,\n        color: \"white\"\n      }), _jsx(Text, {\n        style: styles.resetButtonText,\n        children: \"Reset Messages\"\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f8f8'\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0'\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333'\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  loadingText: {\n    marginTop: 12,\n    fontSize: 16,\n    color: '#666'\n  },\n  conversationItem: {\n    flexDirection: 'row',\n    padding: 15,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  unreadItem: {\n    backgroundColor: '#f0f7ff'\n  },\n  avatarContainer: {\n    marginRight: 12\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25\n  },\n  avatarPlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  conversationInfo: {\n    flex: 1\n  },\n  conversationHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 4\n  },\n  username: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333'\n  },\n  messageTime: {\n    fontSize: 12,\n    color: '#888'\n  },\n  messagePreviewContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center'\n  },\n  messagePreview: {\n    fontSize: 14,\n    color: '#666'\n  },\n  unreadText: {\n    fontWeight: 'bold',\n    color: '#000'\n  },\n  failedText: {\n    color: 'red'\n  },\n  unreadBadge: {\n    backgroundColor: '#0066CC',\n    width: 20,\n    height: 20,\n    borderRadius: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 8,\n    alignSelf: 'center'\n  },\n  unreadCount: {\n    color: 'white',\n    fontSize: 12,\n    fontWeight: 'bold'\n  },\n  postTitle: {\n    fontSize: 14,\n    color: '#0066CC',\n    marginBottom: 4\n  },\n  centeredContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  noticeTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginTop: 16,\n    marginBottom: 8,\n    color: '#333'\n  },\n  noticeText: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 24,\n    color: '#666',\n    lineHeight: 22\n  },\n  loginButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    marginTop: 8\n  },\n  loginButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  trialButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    marginBottom: 12,\n    width: '80%',\n    alignItems: 'center'\n  },\n  trialButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  upgradeButton: {\n    borderWidth: 1,\n    borderColor: '#0066CC',\n    backgroundColor: 'transparent',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    width: '80%',\n    alignItems: 'center'\n  },\n  upgradeButtonText: {\n    color: '#0066CC',\n    fontSize: 16,\n    fontWeight: '600'\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  emptyTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginTop: 16,\n    marginBottom: 8,\n    color: '#333'\n  },\n  emptyText: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 24,\n    color: '#666',\n    lineHeight: 22\n  },\n  findPostsButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8\n  },\n  findPostsButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  newChatButton: {\n    position: 'absolute',\n    right: 20,\n    bottom: 20,\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n    elevation: 3\n  },\n  newChatButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    marginLeft: 4\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    padding: 20\n  },\n  trialModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    width: '85%',\n    maxWidth: 400,\n    overflow: 'hidden',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 4\n  },\n  trialModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee'\n  },\n  trialModalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333'\n  },\n  trialModalBody: {\n    padding: 20,\n    alignItems: 'center'\n  },\n  trialIcon: {\n    marginBottom: 15\n  },\n  trialTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 10\n  },\n  trialDescription: {\n    fontSize: 16,\n    color: '#333',\n    textAlign: 'center',\n    marginBottom: 20,\n    lineHeight: 24\n  },\n  benefitsContainer: {\n    marginBottom: 20\n  },\n  benefitRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4\n  },\n  benefitText: {\n    fontSize: 16,\n    color: '#333',\n    marginLeft: 8\n  },\n  phoneInputContainer: {\n    width: '100%',\n    marginBottom: 20\n  },\n  phoneLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 8,\n    color: '#333'\n  },\n  phoneInputWrapper: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 8,\n    padding: 12\n  },\n  phoneIcon: {\n    marginRight: 8\n  },\n  phoneInput: {\n    flex: 1,\n    fontSize: 16\n  },\n  errorText: {\n    color: 'red',\n    fontSize: 12,\n    marginTop: 5\n  },\n  startTrialButton: {\n    backgroundColor: '#0066CC',\n    padding: 12,\n    borderRadius: 8,\n    flex: 1.5,\n    alignItems: 'center'\n  },\n  startTrialButtonText: {\n    color: 'white',\n    fontWeight: 'bold'\n  },\n  termsText: {\n    fontSize: 12,\n    color: '#666',\n    textAlign: 'center',\n    marginTop: 10\n  },\n  statusBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f0f0f0',\n    paddingVertical: 4,\n    paddingHorizontal: 8,\n    borderRadius: 12\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n    marginLeft: 4\n  },\n  composeModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    width: '100%',\n    maxWidth: 400,\n    overflow: 'hidden',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.3,\n    shadowRadius: 4\n  },\n  composeModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n    backgroundColor: 'white'\n  },\n  chatHeaderInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1\n  },\n  chatHeaderAvatar: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    marginRight: 8\n  },\n  chatHeaderAvatarPlaceholder: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 8\n  },\n  chatHeaderTextContainer: {\n    flexDirection: 'column',\n    flex: 1\n  },\n  composeModalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333'\n  },\n  chatHeaderPostTitle: {\n    fontSize: 14,\n    color: '#666'\n  },\n  chatMessagesContainer: {\n    flex: 1,\n    backgroundColor: '#f8f8f8'\n  },\n  messagesListContent: {\n    padding: 16,\n    flexGrow: 1,\n    justifyContent: 'flex-end'\n  },\n  messageBubble: {\n    maxWidth: '80%',\n    padding: 12,\n    borderRadius: 18,\n    marginBottom: 8\n  },\n  myMessage: {\n    backgroundColor: '#0066CC',\n    alignSelf: 'flex-end',\n    borderBottomRightRadius: 4\n  },\n  theirMessage: {\n    backgroundColor: 'white',\n    alignSelf: 'flex-start',\n    borderBottomLeftRadius: 4\n  },\n  messageText: {\n    fontSize: 16\n  },\n  myMessageText: {\n    color: 'white'\n  },\n  theirMessageText: {\n    color: '#333'\n  },\n  messageTime: {\n    fontSize: 12,\n    marginTop: 4,\n    alignSelf: 'flex-end'\n  },\n  myMessageTime: {\n    color: 'rgba(255, 255, 255, 0.7)'\n  },\n  theirMessageTime: {\n    color: 'rgba(0, 0, 0, 0.5)'\n  },\n  chatInputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: 'white',\n    borderTopWidth: 1,\n    borderTopColor: '#eee'\n  },\n  chatInput: {\n    flex: 1,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 20,\n    marginRight: 10,\n    maxHeight: 100\n  },\n  sendButton: {\n    backgroundColor: '#0066CC',\n    borderRadius: 25,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  sendButtonDisabled: {\n    backgroundColor: '#cccccc'\n  },\n  noMessagesContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20\n  },\n  noMessagesText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#666',\n    marginTop: 10\n  },\n  noMessagesSubtext: {\n    fontSize: 14,\n    color: '#999',\n    textAlign: 'center',\n    marginTop: 5\n  },\n  resetButton: {\n    position: 'absolute',\n    left: 20,\n    bottom: 20,\n    backgroundColor: '#FF3B30',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n    elevation: 3\n  },\n  resetButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    marginLeft: 4\n  },\n  fullScreenModalOverlay: {\n    flex: 1,\n    backgroundColor: 'white'\n  },\n  chatModalContent: {\n    flex: 1,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  unreadDot: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 12,\n    height: 12,\n    backgroundColor: '#0066CC',\n    borderRadius: 6,\n    borderWidth: 2,\n    borderColor: 'white'\n  }\n});\nexport default ChatListScreen;","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","View","Text","StyleSheet","FlatList","TouchableOpacity","ActivityIndicator","Alert","Image","Modal","TextInput","Ionicons","AuthContext","axios","API_URL","getConversationsList","sendDirectMessage","getMessages","KeyboardAwareScrollView","AsyncStorage","jsx","_jsx","jsxs","_jsxs","ChatListScreen","_ref","_route$params2","_route$params6","_route$params7","_route$params8","navigation","route","_useContext","userInfo","requireLogin","_useState","_useState2","_slicedToArray","conversations","setConversations","_useState3","_useState4","loading","setLoading","_useState5","_useState6","refreshing","setRefreshing","_useState7","_useState8","showTrialModal","setShowTrialModal","_useState9","phone","_useState10","setPhone","_useState11","_useState12","phoneError","setPhoneError","_useState13","_useState14","isStartingTrial","setIsStartingTrial","_useState15","_useState16","trialError","setTrialError","requestedTrialRef","_useState17","_useState18","showComposeModal","setShowComposeModal","_useState19","_useState20","newMessage","setNewMessage","_useState21","_useState22","selectedUser","setSelectedUser","_useState23","_useState24","selectedPost","setSelectedPost","unsubscribe","addListener","fetchConversations","_route$params","params","messageUpdated","console","log","setParams","undefined","_route$params3","_route$params4","_route$params5","showComposeMessage","checkAccess","_ref2","_asyncToGenerator","apiConversations","length","formattedConversations","map","message","otherParty","sender","_id","receiver","post","user","lastMessage","messages","unreadCount","isRead","sort","a","b","_b$lastMessage","_a$lastMessage","Date","createdAt","apiError","savedConversations","getItem","parsedConversations","JSON","parse","demoConversations","name","profileImage","content","recipient","title","now","setItem","stringify","error","alert","apply","arguments","handleRefresh","goToChat","_ref3","conversation","response","success","data","existingConvIndex","findIndex","c","updatedConversations","_toConsumableArray","_x","handleSendNewMessage","_ref4","trim","messageText","tempMessage","toISOString","email","sending","conversationId","_objectSpread","concat","newConversation","messageData","updatedConvs","convIndex","msgIndex","msg","setTimeout","navigate","failed","resetMessages","_ref5","removeItem","text","onPress","style","styles","centeredContainer","children","size","color","noticeTitle","noticeText","loginButton","loginButtonText","renderEmptyState","emptyContainer","emptyTitle","emptyText","findPostsButton","findPostsButtonText","renderConversationItem","_ref6","_item$lastMessage","_item$lastMessage$sen","_item$lastMessage2","_item$lastMessage3","_item$lastMessage4","_item$lastMessage5","_item$user","_item$user2","_item$lastMessage6","_item$post","item","isUnread","isSenderMe","messagePreview","isSending","isFailed","conversationItem","unreadItem","avatarContainer","source","uri","avatar","avatarPlaceholder","unreadDot","conversationInfo","conversationHeader","username","messageTime","toLocaleTimeString","hour","minute","messagePreviewContainer","unreadText","failedText","numberOfLines","unreadBadge","postTitle","renderComposeModal","selectedConversation","find","conversationMessages","visible","transparent","animationType","onRequestClose","fullScreenModalOverlay","chatModalContent","composeModalHeader","chatHeaderInfo","chatHeaderAvatar","chatHeaderAvatarPlaceholder","chatHeaderTextContainer","composeModalTitle","chatHeaderPostTitle","chatMessagesContainer","keyExtractor","renderItem","_ref7","_item$sender","isFromMe","messageBubble","myMessage","theirMessage","myMessageText","theirMessageText","myMessageTime","theirMessageTime","inverted","contentContainerStyle","messagesListContent","noMessagesContainer","noMessagesText","noMessagesSubtext","chatInputContainer","chatInput","placeholder","value","onChangeText","multiline","maxHeight","sendButton","sendButtonDisabled","disabled","loadingContainer","loadingText","container","onRefresh","ListEmptyComponent","flex","newChatButton","newChatButtonText","resetButton","resetButtonText","create","backgroundColor","header","flexDirection","justifyContent","alignItems","paddingHorizontal","paddingVertical","borderBottomWidth","borderBottomColor","headerTitle","fontSize","fontWeight","marginTop","padding","marginRight","width","height","borderRadius","marginBottom","marginLeft","alignSelf","textAlign","lineHeight","trialButton","trialButtonText","upgradeButton","borderWidth","borderColor","upgradeButtonText","position","right","bottom","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","modalOverlay","trialModalContent","maxWidth","overflow","trialModalHeader","trialModalTitle","trialModalBody","trialIcon","trialTitle","trialDescription","benefitsContainer","benefitRow","benefitText","phoneInputContainer","phoneLabel","phoneInputWrapper","phoneIcon","phoneInput","errorText","startTrialButton","startTrialButtonText","termsText","statusBadge","statusText","composeModalContent","flexGrow","borderBottomRightRadius","borderBottomLeftRadius","borderTopWidth","borderTopColor","left","display"],"sources":["/Users/handy.hasan/Documents/SportsConnect/client/screens/ChatListScreen.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from 'react';\nimport {\n  View,\n  Text,\n  StyleSheet,\n  FlatList,\n  TouchableOpacity,\n  ActivityIndicator,\n  Alert,\n  Image,\n  Modal,\n  TextInput\n} from 'react-native';\nimport { Ionicons } from '@expo/vector-icons';\nimport { AuthContext } from '../context/AuthContext';\nimport axios from 'axios';\nimport { API_URL } from '../config';\nimport { getConversationsList, sendDirectMessage, getMessages } from '../services/api';\nimport { KeyboardAwareScrollView } from 'react-native-keyboard-aware-scroll-view';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst ChatListScreen = ({ navigation, route }) => {\n  const { userInfo, requireLogin } = useContext(AuthContext);\n  const [conversations, setConversations] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [refreshing, setRefreshing] = useState(false);\n  const [showTrialModal, setShowTrialModal] = useState(false);\n  const [phone, setPhone] = useState(userInfo?.phone || '');\n  const [phoneError, setPhoneError] = useState('');\n  const [isStartingTrial, setIsStartingTrial] = useState(false);\n  const [trialError, setTrialError] = useState('');\n  const requestedTrialRef = useRef(false);\n  const [showComposeModal, setShowComposeModal] = useState(false);\n  const [newMessage, setNewMessage] = useState('');\n  const [selectedUser, setSelectedUser] = useState(null);\n  const [selectedPost, setSelectedPost] = useState(null);\n\n  useEffect(() => {\n    const unsubscribe = navigation.addListener('focus', () => {\n      if (userInfo) {\n        fetchConversations();\n      }\n    });\n\n    return unsubscribe;\n  }, [navigation, route]);\n\n  // Add a listener for route.params updates which is used for message sending notifications\n  useEffect(() => {\n    if (route.params?.messageUpdated && userInfo) {\n      console.log('Message update detected, refreshing conversations');\n      fetchConversations();\n      // Clear the param after handling to avoid repeated refreshes\n      navigation.setParams({ messageUpdated: undefined });\n    }\n  }, [route.params?.messageUpdated]);\n\n  // New effect to handle selected user and post for new conversation\n  useEffect(() => {\n    if (route.params?.selectedUser && route.params?.selectedPost && route.params?.showComposeMessage) {\n      // Directly show compose modal - no premium check\n      setSelectedUser(route.params.selectedUser);\n      setSelectedPost(route.params.selectedPost);\n      setShowComposeModal(true);\n    }\n  }, [route.params?.selectedUser, route.params?.selectedPost, route.params?.showComposeMessage]);\n\n  useEffect(() => {\n    if (userInfo) {\n      fetchConversations();\n    }\n  }, [userInfo]);\n\n  const checkAccess = () => {\n    // Just check if user is logged in\n    return !!userInfo;\n  };\n\n  const fetchConversations = async () => {\n    try {\n      setLoading(true);\n      \n      // Try to use the real API endpoint first\n      try {\n        console.log('Attempting to fetch conversations from API...');\n        const apiConversations = await getConversationsList();\n        \n        if (apiConversations && apiConversations.length > 0) {\n          console.log('Successfully fetched conversations from API');\n          \n          // Format the conversations to match our UI structure\n          const formattedConversations = apiConversations.map(message => {\n            // Determine if the current user is the sender or recipient\n            const otherParty = message.sender._id === userInfo._id ? \n              message.receiver : message.sender;\n              \n            return {\n              _id: `${otherParty._id}_${message.post._id}`,\n              user: otherParty,\n              post: message.post,\n              lastMessage: message,\n              messages: [message], // We'll get more messages when user opens the conversation\n              unreadCount: message.receiver._id === userInfo._id && !message.isRead ? 1 : 0\n            };\n          });\n          \n          // Sort by most recent message\n          formattedConversations.sort((a, b) => \n            new Date(b.lastMessage?.createdAt) - new Date(a.lastMessage?.createdAt)\n          );\n          \n          setConversations(formattedConversations);\n          setLoading(false);\n          setRefreshing(false);\n          return;\n        }\n      } catch (apiError) {\n        console.log('Error fetching from API, falling back to local storage:', apiError);\n      }\n      \n      // If the API call fails, fall back to AsyncStorage\n      // This is a fallback for demonstration when not connected to backend\n      const savedConversations = await AsyncStorage.getItem('demo_conversations');\n      \n      if (savedConversations) {\n        const parsedConversations = JSON.parse(savedConversations);\n        if (parsedConversations && parsedConversations.length > 0) {\n          setConversations(parsedConversations);\n          setLoading(false);\n          setRefreshing(false);\n          return;\n        }\n      }\n      \n      // Create demo conversation if nothing found\n      const demoConversations = [\n        {\n          _id: 'demo1',\n          user: { \n            _id: 'user1', \n            name: 'John Doe',\n            profileImage: 'https://randomuser.me/api/portraits/men/32.jpg'\n          },\n          lastMessage: {\n            content: 'This is a demo conversation.',\n            createdAt: new Date(),\n            sender: { _id: 'user1', name: 'John Doe' },\n            recipient: { _id: userInfo._id, name: userInfo.name }\n          },\n          post: {\n            _id: 'post1',\n            title: 'Basketball game this weekend'\n          },\n          unreadCount: 1,\n          messages: [\n            {\n              _id: `msg_${Date.now()}`,\n              content: 'This is a demo conversation.',\n              createdAt: new Date(),\n              sender: { _id: 'user1', name: 'John Doe' },\n              recipient: { _id: userInfo._id, name: userInfo.name },\n              post: {\n                _id: 'post1',\n                title: 'Basketball game this weekend'\n              }\n            }\n          ]\n        }\n      ];\n      \n      setConversations(demoConversations);\n      await AsyncStorage.setItem('demo_conversations', JSON.stringify(demoConversations));\n      \n    } catch (error) {\n      console.log('Error fetching conversations:', error);\n      Alert.alert('Error', 'Failed to load conversations. Please try again later.');\n    } finally {\n      setLoading(false);\n      setRefreshing(false);\n    }\n  };\n\n  const handleRefresh = () => {\n    setRefreshing(true);\n    fetchConversations();\n  };\n\n  const goToChat = async (conversation) => {\n    // Set up the conversation for viewing/replying\n    setSelectedUser(conversation.user);\n    setSelectedPost(conversation.post);\n    setNewMessage(''); // Clear any previous message\n    \n    try {\n      // Try to fetch messages from API first\n      try {\n        console.log('Fetching messages for conversation with:', conversation.user._id);\n        const response = await getMessages(conversation.user._id);\n        \n        if (response.success && response.data && response.data.length > 0) {\n          // Update conversation with full message history\n          const existingConvIndex = conversations.findIndex(c => \n            c._id === conversation._id\n          );\n          \n          if (existingConvIndex !== -1) {\n            const updatedConversations = [...conversations];\n            updatedConversations[existingConvIndex].messages = response.data;\n            setConversations(updatedConversations);\n          }\n        }\n      } catch (apiError) {\n        console.log('Error fetching messages from API:', apiError);\n      }\n      \n      // Open the compose modal instead of navigating to ChatScreen\n      setShowComposeModal(true);\n      \n    } catch (error) {\n      console.log('Error in goToChat:', error);\n      // Even if there's an error, still try to open the modal\n      setShowComposeModal(true);\n    }\n  };\n\n  const handleSendNewMessage = async () => {\n    if (!newMessage.trim() || !selectedUser || !selectedPost) {\n      return;\n    }\n\n    // Store the message before clearing the input for better UX\n    const messageText = newMessage.trim();\n    setNewMessage('');\n    \n    // Create a temporary message to show immediately\n    const tempMessage = {\n      _id: `local_msg_${Date.now()}`,\n      content: messageText,\n      createdAt: new Date().toISOString(),\n      sender: { \n        _id: userInfo._id, \n        name: userInfo.name,\n        email: userInfo.email \n      },\n      receiver: selectedUser,\n      post: selectedPost,\n      sending: true\n    };\n    \n    try {\n      // Update UI immediately for better user experience\n      // Find existing conversation or create new one\n      const conversationId = `${selectedUser._id}_${selectedPost._id}`;\n      const existingConvIndex = conversations.findIndex(c => \n        c.user._id === selectedUser._id && c.post._id === selectedPost._id\n      );\n      \n      let updatedConversations = [...conversations];\n      \n      if (existingConvIndex !== -1) {\n        // Update existing conversation\n        updatedConversations[existingConvIndex] = {\n          ...updatedConversations[existingConvIndex],\n          lastMessage: tempMessage,\n          messages: [\n            tempMessage,\n            ...(updatedConversations[existingConvIndex].messages || [])\n          ]\n        };\n      } else {\n        // Create new conversation\n        const newConversation = {\n          _id: conversationId,\n          user: selectedUser,\n          lastMessage: tempMessage,\n          messages: [tempMessage],\n          post: selectedPost,\n          unreadCount: 0\n        };\n        updatedConversations = [newConversation, ...updatedConversations];\n      }\n      \n      setConversations(updatedConversations);\n      \n      // Now try to send via API\n      const messageData = {\n        recipient: selectedUser._id,\n        content: messageText,\n        post: selectedPost._id\n      };\n      \n      console.log('Sending message via API:', messageData);\n      \n      let response;\n      try {\n        response = await sendDirectMessage(messageData);\n        console.log('API response:', response);\n        \n        // Update the conversation with the actual response\n        const updatedConvs = [...updatedConversations];\n        const convIndex = updatedConvs.findIndex(c => \n          c.user._id === selectedUser._id && c.post._id === selectedPost._id\n        );\n        \n        if (convIndex !== -1) {\n          // Update the message with the real data from the server\n          updatedConvs[convIndex].lastMessage = {\n            ...response,\n            sender: { \n              _id: userInfo._id, \n              name: userInfo.name,\n              email: userInfo.email \n            },\n            receiver: selectedUser,\n            post: selectedPost\n          };\n          \n          // Update the message in the messages array too\n          const msgIndex = updatedConvs[convIndex].messages.findIndex(\n            msg => msg._id === tempMessage._id\n          );\n          \n          if (msgIndex !== -1) {\n            updatedConvs[convIndex].messages[msgIndex] = {\n              ...response,\n              sender: { \n                _id: userInfo._id, \n                name: userInfo.name,\n                email: userInfo.email \n              },\n              receiver: selectedUser,\n              post: selectedPost\n            };\n          }\n          \n          setConversations(updatedConvs);\n        }\n        \n        // Close the compose modal\n        setShowComposeModal(false);\n        \n        // Navigate to ChatScreen with the updated conversation\n        setTimeout(() => {\n          navigation.navigate('Chat', {\n            recipient: selectedUser,\n            post: selectedPost,\n            messageUpdated: Date.now()\n          });\n        }, 200);\n        \n      } catch (apiError) {\n        console.log('Error sending via API, using local fallback:', apiError);\n        \n        // Mark the message as failed in the UI\n        const updatedConvs = [...updatedConversations];\n        const convIndex = updatedConvs.findIndex(c => \n          c.user._id === selectedUser._id && c.post._id === selectedPost._id\n        );\n        \n        if (convIndex !== -1) {\n          // Mark the message as failed\n          const msgIndex = updatedConvs[convIndex].messages.findIndex(\n            msg => msg._id === tempMessage._id\n          );\n          \n          if (msgIndex !== -1) {\n            updatedConvs[convIndex].messages[msgIndex] = {\n              ...updatedConvs[convIndex].messages[msgIndex],\n              sending: false,\n              failed: true\n            };\n          }\n          \n          setConversations(updatedConvs);\n        }\n        \n        Alert.alert('Error', 'Failed to send message. Network issue or server unavailable.');\n      }\n      \n    } catch (error) {\n      console.log('Error saving message:', error);\n      Alert.alert('Error', 'Failed to send message. Please try again.');\n    }\n  };\n\n  // Update the reset function to clear data\n  const resetMessages = async () => {\n    try {\n      // For demo purposes only - clear local storage\n      await AsyncStorage.removeItem('demo_conversations');\n      \n      Alert.alert(\n        'Messages Reset',\n        'Local message cache has been cleared. Messages from the server may still exist. Pull down to refresh and see the changes.',\n        [{ text: 'OK', onPress: () => fetchConversations() }]\n      );\n    } catch (error) {\n      console.log('Error resetting messages:', error);\n      Alert.alert('Error', 'Failed to reset messages.');\n    }\n  };\n\n  // Not logged in view\n  if (!userInfo) {\n    return (\n      <View style={styles.centeredContainer}>\n        <Ionicons name=\"chatbubbles-outline\" size={70} color=\"#0066CC\" />\n        <Text style={styles.noticeTitle}>Login Required</Text>\n        <Text style={styles.noticeText}>\n          Please log in to access your conversations\n        </Text>\n        <TouchableOpacity\n          style={styles.loginButton}\n          onPress={() => navigation.navigate('Login')}\n        >\n          <Text style={styles.loginButtonText}>Login</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  }\n\n  // Show empty state when there are no conversations\n  const renderEmptyState = () => {\n    return (\n      <View style={styles.emptyContainer}>\n        <Ionicons name=\"chatbubbles-outline\" size={70} color=\"#ccc\" />\n        <Text style={styles.emptyTitle}>No Conversations Yet</Text>\n        <Text style={styles.emptyText}>\n          You don't have any messages yet. Find a post you're interested in and start a conversation!\n        </Text>\n        <TouchableOpacity\n          style={styles.findPostsButton}\n          onPress={() => navigation.navigate('Home')}\n        >\n          <Text style={styles.findPostsButtonText}>Find Posts</Text>\n        </TouchableOpacity>\n      </View>\n    );\n  };\n\n  const renderConversationItem = ({ item }) => {\n    const isUnread = item.unreadCount > 0;\n    const isSenderMe = item.lastMessage?.sender?._id === userInfo?._id;\n    const messagePreview = isSenderMe \n      ? `You: ${item.lastMessage?.content}` \n      : item.lastMessage?.content;\n    \n    // Check if a message is still sending or failed\n    const isSending = item.lastMessage?.sending;\n    const isFailed = item.lastMessage?.failed;\n\n    return (\n      <TouchableOpacity\n        style={[styles.conversationItem, isUnread && styles.unreadItem]}\n        onPress={() => goToChat(item)}\n      >\n        <View style={styles.avatarContainer}>\n          {item.user?.profileImage ? (\n            <Image\n              source={{ uri: item.user.profileImage }}\n              style={styles.avatar}\n            />\n          ) : (\n            <View style={styles.avatarPlaceholder}>\n              <Ionicons name=\"person\" size={20} color=\"#999\" />\n            </View>\n          )}\n          {isUnread && <View style={styles.unreadDot} />}\n        </View>\n\n        <View style={styles.conversationInfo}>\n          <View style={styles.conversationHeader}>\n            <Text style={styles.username}>{item.user?.name}</Text>\n            <Text style={styles.messageTime}>\n              {new Date(item.lastMessage?.createdAt).toLocaleTimeString([], {\n                hour: '2-digit',\n                minute: '2-digit'\n              })}\n            </Text>\n          </View>\n\n          <View style={styles.messagePreviewContainer}>\n            <Text \n              style={[\n                styles.messagePreview, \n                isUnread && styles.unreadText,\n                isFailed && styles.failedText\n              ]} \n              numberOfLines={1}\n            >\n              {isSending && '🕒 '}\n              {isFailed && '❌ '}\n              {messagePreview}\n            </Text>\n            \n            {isUnread && item.unreadCount > 0 && (\n              <View style={styles.unreadBadge}>\n                <Text style={styles.unreadCount}>\n                  {item.unreadCount > 99 ? '99+' : item.unreadCount}\n                </Text>\n              </View>\n            )}\n          </View>\n\n          <Text style={styles.postTitle} numberOfLines={1}>\n            Re: {item.post?.title}\n          </Text>\n        </View>\n      </TouchableOpacity>\n    );\n  };\n\n  // Add this function to render the compose message modal\n  const renderComposeModal = () => {\n    // Find the conversation that matches the selected user and post\n    const selectedConversation = conversations.find(\n      c => c.user._id === selectedUser?._id && c.post._id === selectedPost?._id\n    );\n    \n    // Get messages from the selected conversation\n    const conversationMessages = selectedConversation?.messages || [];\n    \n    return (\n    <Modal\n      visible={showComposeModal}\n      transparent={true}\n      animationType=\"slide\"\n      onRequestClose={() => setShowComposeModal(false)}\n    >\n        <View style={styles.fullScreenModalOverlay}>\n          <View style={styles.chatModalContent}>\n          <View style={styles.composeModalHeader}>\n              <View style={styles.chatHeaderInfo}>\n                {selectedUser?.profileImage ? (\n                  <Image\n                    source={{ uri: selectedUser.profileImage }}\n                    style={styles.chatHeaderAvatar}\n                  />\n                ) : (\n                  <View style={styles.chatHeaderAvatarPlaceholder}>\n                    <Ionicons name=\"person\" size={18} color=\"#ccc\" />\n                  </View>\n                )}\n                <View style={styles.chatHeaderTextContainer}>\n            <Text style={styles.composeModalTitle}>\n                    {selectedUser?.name || 'Chat'}\n            </Text>\n                  {selectedPost && (\n                    <Text style={styles.chatHeaderPostTitle} numberOfLines={1}>\n                      Re: {selectedPost.title}\n                    </Text>\n                  )}\n                </View>\n              </View>\n            <TouchableOpacity onPress={() => setShowComposeModal(false)}>\n              <Ionicons name=\"close\" size={24} color=\"#333\" />\n            </TouchableOpacity>\n          </View>\n          \n            <View style={styles.chatMessagesContainer}>\n              {conversationMessages.length > 0 ? (\n                <FlatList\n                  data={conversationMessages}\n                  keyExtractor={(item) => item._id}\n                  renderItem={({ item }) => {\n                    const isFromMe = item.sender?._id === userInfo?._id;\n                    return (\n                      <View style={[\n                        styles.messageBubble,\n                        isFromMe ? styles.myMessage : styles.theirMessage\n                      ]}>\n                        <Text style={[\n                          styles.messageText,\n                          isFromMe ? styles.myMessageText : styles.theirMessageText\n                        ]}>\n                          {item.content}\n                        </Text>\n                        <Text style={[\n                          styles.messageTime,\n                          isFromMe ? styles.myMessageTime : styles.theirMessageTime\n                        ]}>\n                          {new Date(item.createdAt).toLocaleTimeString([], \n                            { hour: '2-digit', minute: '2-digit' }\n                          )}\n                        </Text>\n                      </View>\n                    );\n                  }}\n                  inverted={true}\n                  contentContainerStyle={styles.messagesListContent}\n                />\n              ) : (\n                <View style={styles.noMessagesContainer}>\n                  <Ionicons name=\"chatbubble-outline\" size={40} color=\"#ccc\" />\n                  <Text style={styles.noMessagesText}>No messages yet</Text>\n                  <Text style={styles.noMessagesSubtext}>\n                    Start the conversation below\n                  </Text>\n              </View>\n            )}\n            </View>\n            \n            <View style={styles.chatInputContainer}>\n            <TextInput\n                style={styles.chatInput}\n              placeholder=\"Type your message here...\"\n              value={newMessage}\n              onChangeText={setNewMessage}\n              multiline\n                maxHeight={100}\n            />\n            <TouchableOpacity\n              style={[\n                styles.sendButton,\n                !newMessage.trim() && styles.sendButtonDisabled\n              ]}\n              onPress={handleSendNewMessage}\n              disabled={!newMessage.trim()}\n            >\n                <Ionicons \n                  name=\"send\" \n                  size={20} \n                  color={newMessage.trim() ? \"white\" : \"#999\"} \n                />\n            </TouchableOpacity>\n          </View>\n        </View>\n        </View>\n    </Modal>\n  );\n  };\n\n  if (loading && !refreshing) {\n    return (\n      <View style={styles.loadingContainer}>\n        <ActivityIndicator size=\"large\" color=\"#0066CC\" />\n        <Text style={styles.loadingText}>Loading conversations...</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={styles.container}>\n      {renderComposeModal()}\n      \n      <FlatList\n        data={conversations}\n        keyExtractor={(item) => item._id}\n        renderItem={renderConversationItem}\n        onRefresh={handleRefresh}\n        refreshing={refreshing}\n        ListEmptyComponent={renderEmptyState}\n        contentContainerStyle={conversations.length === 0 ? { flex: 1 } : null}\n      />\n      \n      {/* Chat buttons - show for all logged in users */}\n      <TouchableOpacity\n        style={styles.newChatButton}\n        onPress={() => navigation.navigate('Home')}\n      >\n        <Ionicons name=\"add\" size={24} color=\"white\" />\n        <Text style={styles.newChatButtonText}>Find Posts</Text>\n      </TouchableOpacity>\n      \n      {/* Add a reset button for testing */}\n      <TouchableOpacity\n        style={styles.resetButton}\n        onPress={() => {\n          Alert.alert(\n            'Reset Messages',\n            'This will clear all messages for all users. Are you sure?',\n            [\n              { text: 'Cancel', style: 'cancel' },\n              { text: 'Reset', onPress: resetMessages, style: 'destructive' }\n            ]\n          );\n        }}\n      >\n        <Ionicons name=\"trash\" size={20} color=\"white\" />\n        <Text style={styles.resetButtonText}>Reset Messages</Text>\n      </TouchableOpacity>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f8f8f8',\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    paddingHorizontal: 16,\n    paddingVertical: 12,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#e0e0e0',\n  },\n  headerTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  loadingContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  loadingText: {\n    marginTop: 12,\n    fontSize: 16,\n    color: '#666',\n  },\n  conversationItem: {\n    flexDirection: 'row',\n    padding: 15,\n    backgroundColor: 'white',\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  unreadItem: {\n    backgroundColor: '#f0f7ff',\n  },\n  avatarContainer: {\n    marginRight: 12,\n  },\n  avatar: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n  },\n  avatarPlaceholder: {\n    width: 50,\n    height: 50,\n    borderRadius: 25,\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  conversationInfo: {\n    flex: 1,\n  },\n  conversationHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    marginBottom: 4,\n  },\n  username: {\n    fontSize: 16,\n    fontWeight: '600',\n    color: '#333',\n  },\n  messageTime: {\n    fontSize: 12,\n    color: '#888',\n  },\n  messagePreviewContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n  },\n  messagePreview: {\n    fontSize: 14,\n    color: '#666',\n  },\n  unreadText: {\n    fontWeight: 'bold',\n    color: '#000',\n  },\n  failedText: {\n    color: 'red',\n  },\n  unreadBadge: {\n    backgroundColor: '#0066CC',\n    width: 20,\n    height: 20,\n    borderRadius: 10,\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginLeft: 8,\n    alignSelf: 'center',\n  },\n  unreadCount: {\n    color: 'white',\n    fontSize: 12,\n    fontWeight: 'bold',\n  },\n  postTitle: {\n    fontSize: 14,\n    color: '#0066CC',\n    marginBottom: 4,\n  },\n  centeredContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  noticeTitle: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginTop: 16,\n    marginBottom: 8,\n    color: '#333',\n  },\n  noticeText: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 24,\n    color: '#666',\n    lineHeight: 22,\n  },\n  loginButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    marginTop: 8,\n  },\n  loginButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  trialButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    marginBottom: 12,\n    width: '80%',\n    alignItems: 'center',\n  },\n  trialButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  upgradeButton: {\n    borderWidth: 1,\n    borderColor: '#0066CC',\n    backgroundColor: 'transparent',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n    width: '80%',\n    alignItems: 'center',\n  },\n  upgradeButtonText: {\n    color: '#0066CC',\n    fontSize: 16,\n    fontWeight: '600',\n  },\n  emptyContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  emptyTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    marginTop: 16,\n    marginBottom: 8,\n    color: '#333',\n  },\n  emptyText: {\n    fontSize: 16,\n    textAlign: 'center',\n    marginBottom: 24,\n    color: '#666',\n    lineHeight: 22,\n  },\n  findPostsButton: {\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 24,\n    borderRadius: 8,\n  },\n  findPostsButtonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  newChatButton: {\n    position: 'absolute',\n    right: 20,\n    bottom: 20,\n    backgroundColor: '#0066CC',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n    elevation: 3,\n  },\n  newChatButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    marginLeft: 4,\n  },\n  modalOverlay: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: 'rgba(0, 0, 0, 0.5)',\n    padding: 20,\n  },\n  trialModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    width: '85%',\n    maxWidth: 400,\n    overflow: 'hidden',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.3,\n    shadowRadius: 4,\n  },\n  trialModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n  },\n  trialModalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  trialModalBody: {\n    padding: 20,\n    alignItems: 'center',\n  },\n  trialIcon: {\n    marginBottom: 15,\n  },\n  trialTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n    marginBottom: 10,\n  },\n  trialDescription: {\n    fontSize: 16,\n    color: '#333',\n    textAlign: 'center',\n    marginBottom: 20,\n    lineHeight: 24,\n  },\n  benefitsContainer: {\n    marginBottom: 20,\n  },\n  benefitRow: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginBottom: 4,\n  },\n  benefitText: {\n    fontSize: 16,\n    color: '#333',\n    marginLeft: 8,\n  },\n  phoneInputContainer: {\n    width: '100%',\n    marginBottom: 20,\n  },\n  phoneLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 8,\n    color: '#333',\n  },\n  phoneInputWrapper: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 8,\n    padding: 12,\n  },\n  phoneIcon: {\n    marginRight: 8,\n  },\n  phoneInput: {\n    flex: 1,\n    fontSize: 16,\n  },\n  errorText: {\n    color: 'red',\n    fontSize: 12,\n    marginTop: 5,\n  },\n  startTrialButton: {\n    backgroundColor: '#0066CC',\n    padding: 12,\n    borderRadius: 8,\n    flex: 1.5,\n    alignItems: 'center',\n  },\n  startTrialButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n  },\n  termsText: {\n    fontSize: 12,\n    color: '#666',\n    textAlign: 'center',\n    marginTop: 10,\n  },\n  statusBadge: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    backgroundColor: '#f0f0f0',\n    paddingVertical: 4,\n    paddingHorizontal: 8,\n    borderRadius: 12,\n  },\n  statusText: {\n    fontSize: 12,\n    fontWeight: '600',\n    marginLeft: 4,\n  },\n  composeModalContent: {\n    backgroundColor: 'white',\n    borderRadius: 16,\n    width: '100%',\n    maxWidth: 400,\n    overflow: 'hidden',\n    elevation: 5,\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.3,\n    shadowRadius: 4,\n  },\n  composeModalHeader: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    padding: 16,\n    borderBottomWidth: 1,\n    borderBottomColor: '#eee',\n    backgroundColor: 'white',\n  },\n  chatHeaderInfo: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    flex: 1,\n  },\n  chatHeaderAvatar: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    marginRight: 8,\n  },\n  chatHeaderAvatarPlaceholder: {\n    width: 36,\n    height: 36,\n    borderRadius: 18,\n    backgroundColor: '#f0f0f0',\n    justifyContent: 'center',\n    alignItems: 'center',\n    marginRight: 8,\n  },\n  chatHeaderTextContainer: {\n    flexDirection: 'column',\n    flex: 1,\n  },\n  composeModalTitle: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#333',\n  },\n  chatHeaderPostTitle: {\n    fontSize: 14,\n    color: '#666',\n  },\n  chatMessagesContainer: {\n    flex: 1,\n    backgroundColor: '#f8f8f8',\n  },\n  messagesListContent: {\n    padding: 16,\n    flexGrow: 1,\n    justifyContent: 'flex-end',\n  },\n  messageBubble: {\n    maxWidth: '80%',\n    padding: 12,\n    borderRadius: 18,\n    marginBottom: 8,\n  },\n  myMessage: {\n    backgroundColor: '#0066CC',\n    alignSelf: 'flex-end',\n    borderBottomRightRadius: 4,\n  },\n  theirMessage: {\n    backgroundColor: 'white',\n    alignSelf: 'flex-start',\n    borderBottomLeftRadius: 4,\n  },\n  messageText: {\n    fontSize: 16,\n  },\n  myMessageText: {\n    color: 'white',\n  },\n  theirMessageText: {\n    color: '#333',\n  },\n  messageTime: {\n    fontSize: 12,\n    marginTop: 4,\n    alignSelf: 'flex-end',\n  },\n  myMessageTime: {\n    color: 'rgba(255, 255, 255, 0.7)',\n  },\n  theirMessageTime: {\n    color: 'rgba(0, 0, 0, 0.5)',\n  },\n  chatInputContainer: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    padding: 12,\n    backgroundColor: 'white',\n    borderTopWidth: 1,\n    borderTopColor: '#eee',\n  },\n  chatInput: {\n    flex: 1,\n    padding: 12,\n    borderWidth: 1,\n    borderColor: '#ddd',\n    borderRadius: 20,\n    marginRight: 10,\n    maxHeight: 100,\n  },\n  sendButton: {\n    backgroundColor: '#0066CC',\n    borderRadius: 25,\n    width: 40,\n    height: 40,\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  sendButtonDisabled: {\n    backgroundColor: '#cccccc',\n  },\n  noMessagesContainer: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: 20,\n  },\n  noMessagesText: {\n    fontSize: 18,\n    fontWeight: 'bold',\n    color: '#666',\n    marginTop: 10,\n  },\n  noMessagesSubtext: {\n    fontSize: 14,\n    color: '#999',\n    textAlign: 'center',\n    marginTop: 5,\n  },\n  resetButton: {\n    position: 'absolute',\n    left: 20,\n    bottom: 20,\n    backgroundColor: '#FF3B30',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n    borderRadius: 24,\n    flexDirection: 'row',\n    alignItems: 'center',\n    shadowColor: '#000',\n    shadowOffset: { width: 0, height: 2 },\n    shadowOpacity: 0.2,\n    shadowRadius: 3,\n    elevation: 3,\n  },\n  resetButtonText: {\n    color: 'white',\n    fontWeight: 'bold',\n    marginLeft: 4,\n  },\n  fullScreenModalOverlay: {\n    flex: 1,\n    backgroundColor: 'white',\n  },\n  chatModalContent: {\n    flex: 1,\n    width: '100%',\n    height: '100%',\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  unreadDot: {\n    position: 'absolute',\n    bottom: 0,\n    right: 0,\n    width: 12,\n    height: 12,\n    backgroundColor: '#0066CC',\n    borderRadius: 6,\n    borderWidth: 2,\n    borderColor: 'white',\n  },\n});\n\nexport default ChatListScreen; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}